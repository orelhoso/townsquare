(function(e){function t(t){for(var i,r,n=t[0],l=t[1],d=t[2],m=0,h=[];m<n.length;m++)r=n[m],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(h.length)h.shift()();return a.push.apply(a,d||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],i=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},s={app:0},a=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/townsquare/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var c=l;a.push(["56d7","chunk-vendors"]),o()})({"00c0":function(e){e.exports=JSON.parse('[{"id":"tb","name":"Trouble Brewing","author":"The Pandemonium Institute","description":"Clouds roll in over Ravenswood Bluff, engulfing this sleepy town and its superstitious inhabitants in foreboding shadow. Freshly-washed clothes dance eerily on lines strung between cottages. Chimneys cough plumes of smoke into the air. Exotic scents waft through cracks in windows and under doors, as hidden cauldrons lay bubbling. An unusually warm Autumn breeze wraps around vine-covered walls and whispers ominously to those brave enough to walk the cobbled streets.\\n\\nAnxious mothers call their children home from play, as thunder begins to clap on the horizon. If you listen more closely, however, noises stranger still can be heard echoing from the neighbouring forest. Under the watchful eye of a looming monastery, silhouetted figures skip from doorway to doorway. Those who can read the signs know there is... Trouble Brewing.","level":"Beginner","roles":[],"isOfficial":true},{"id":"bmr","name":"Bad Moon Rising","author":"The Pandemonium Institute","description":"The sun is swallowed by a jagged horizon as another winter\'s day surrenders to the night. Flecks of orange and red decay into deeper browns, the forest transforming in silent anticipation of the coming snow.\\n\\nRavenous wolves howl from the bowels of a rocky crevasse beyond the town borders, sending birds scattering from their cozy rooks. Travelers hurry into the inn, seeking shelter from the gathering chill. They warm themselves with hot tea, sweet strains of music and hearty ale, unaware that strange and nefarious eyes stalk them from the ruins of this once great city.\\n\\nTonight, even the livestock know there is a... Bad Moon Rising.","level":"Intermediate","roles":[],"isOfficial":true},{"id":"snv","name":"Sects & Violets","author":"The Pandemonium Institute","description":"Vibrant spring gives way to a warm and inviting summer. Flowers of every description blossom as far as the eye can see, tenderly nurtured in public gardens and window boxes overlooking the lavish promenade. Birds sing, artists paint and philosophers ponder life\'s greatest mysteries inside a bustling tavern as a circus pitches its endearingly ragged tent on the edge of town.\\n\\nAs the townsfolk bask in frivolity and mischief, indulging themselves in fine entertainment and even finer wine, dark and clandestine forces are assembling. Witches and cults lurk in majestic ruins on the fringes of the community, hosting secret meetings in underground caves and malevolently plotting the downfall of Ravenswood Bluff and its revelers.\\n\\nThe time is ripe for... Sects & Violets.","level":"Intermediate","roles":[],"isOfficial":true},{"id":"luf","name":"Laissez un Faire","author":"The Pandemonium Institute","description":"","level":"Veteran","roles":["balloonist","savant","amnesiac","fisherman","artist","cannibal","mutant","lunatic","widow","goblin","leviathan"],"isOfficial":true}]')},"013f":function(e,t,o){e.exports=o.p+"img/washerwoman.554de332.png"},"027a":function(e,t,o){e.exports=o.p+"img/barista.6c427e65.png"},"0436":function(e,t,o){e.exports=o.p+"img/cerenovus.cc343942.png"},"043b":function(e,t,o){e.exports=o.p+"img/amnesiac.fbd5ab33.png"},"07ab":function(e,t,o){e.exports=o.p+"img/politician.521cc53f.png"},"0aaa":function(e,t,o){e.exports=o.p+"img/tb.438499cd.png"},"0b29":function(e,t,o){e.exports=o.p+"img/shabaloth.589858d2.png"},"0b61":function(e,t,o){e.exports=o.p+"img/lunatic.39fb7a2a.png"},"0c12":function(e,t,o){e.exports=o.p+"img/oracle.8b13b932.png"},"0c59":function(e,t,o){e.exports=o.p+"img/ravenkeeper.a1dfbc31.png"},"0d06":function(e,t,o){e.exports=o.p+"img/spiritofivory.ef077db5.png"},"0e20":function(e,t,o){e.exports=o.p+"img/undertaker.4f2e9806.png"},"10d6":function(e,t,o){},"125e":function(e,t,o){e.exports=o.p+"img/chambermaid.5fa8599d.png"},"160b":function(e,t,o){e.exports=o.p+"img/plus.9b84ce65.png"},"177d":function(e,t,o){e.exports=o.p+"img/recluse.81a048d5.png"},"17ad":function(e,t,o){e.exports=o.p+"img/mutant.1b9f9dee.png"},1923:function(e,t,o){e.exports=o.p+"img/huntsman.994fb309.png"},"1d01":function(e,t,o){e.exports=o.p+"img/buddhist.2d7c4106.png"},"1e83":function(e,t,o){e.exports=o.p+"img/chef.c2256a45.png"},2094:function(e,t,o){e.exports=o.p+"img/preacher.a86e913b.png"},"20ca":function(e,t,o){e.exports=o.p+"img/zombuul.2872fbb3.png"},2176:function(e,t,o){"use strict";o("10d6")},"223c":function(e,t,o){e.exports=o.p+"img/sailor.a9d4454a.png"},2294:function(e,t,o){},"22c9":function(e,t,o){e.exports=o.p+"img/widow.3ae71cbf.png"},"23b1":function(e,t,o){e.exports=o.p+"img/bonecollector.bd2d8b7a.png"},"23ca":function(e,t,o){"use strict";o("65c0")},2490:function(e,t,o){e.exports=o.p+"img/outsider.2c6bc66e.png"},"24d3":function(e,t,o){e.exports=o.p+"img/baron.2628f49e.png"},"25f6":function(e,t,o){e.exports=o.p+"img/bureaucrat.6a892d56.png"},"27a3":function(e,t,o){e.exports=o.p+"img/puzzlemaster.b4ec360b.png"},"28bf":function(e,t,o){e.exports=o.p+"img/bmr-minion.6559191b.png"},"2b04":function(e,t,o){e.exports=o.p+"img/leviathan.24f3cd86.png"},"2cd0":function(e,t,o){e.exports=o.p+"img/artist.e76624f3.png"},"2fd0":function(e,t,o){e.exports=o.p+"img/snv.288a42ad.png"},"30b6":function(e,t,o){e.exports=o.p+"img/sage.8afae02e.png"},3273:function(e,t,o){e.exports=o.p+"img/poppygrower.c9d4c880.png"},"327a":function(e,t,o){e.exports=o.p+"img/scapegoat.73640c39.png"},3603:function(e,t,o){e.exports=o.p+"img/philosopher.9a154d6c.png"},3636:function(e,t,o){"use strict";o("d4b2")},"37dd":function(e,t,o){e.exports=o.p+"img/butcher.2efedb75.png"},"38a5":function(e,t,o){e.exports=o.p+"img/towncrier.8c7af52c.png"},"398f":function(e,t,o){e.exports=o.p+"img/cultleader.1f9a22f0.png"},3998:function(e,t,o){},"39eb":function(e,t,o){e.exports=o.p+"img/toymaker.a96806e5.png"},"3a43":function(e,t,o){e.exports=o.p+"img/vortox.f022015e.png"},"3b65":function(e,t,o){e.exports=o.p+"img/deviant.9fcfb58a.png"},"3e70":function(e,t,o){e.exports=o.p+"img/imp.ff808901.png"},"3f65":function(e,t,o){e.exports=o.p+"img/moonchild.04fb95f1.png"},"3f8f":function(e,t,o){"use strict";o("557b")},4021:function(e,t,o){e.exports=o.p+"img/snakecharmer.7769a0cc.png"},"42ed":function(e,t,o){},"43e8":function(e,t,o){e.exports=o.p+"img/fortuneteller.a641461f.png"},"441d":function(e,t,o){e.exports=o.p+"img/custom.5334aaeb.png"},"451a":function(e,t,o){e.exports=o.p+"img/snv-minion.60768802.png"},4720:function(e,t,o){e.exports=o.p+"img/fool.0d847910.png"},"4bea":function(e,t,o){e.exports=o.p+"img/apprentice.ff782fd9.png"},"4c96":function(e,t,o){"use strict";o("7b43")},"4d73":function(e,t,o){e.exports=o.p+"img/librarian.c867e6d6.png"},"4dd9":function(e,t,o){e.exports=o.p+"img/snv-outsider.5b5cae7f.png"},"4e76":function(e,t,o){e.exports=o.p+"img/soldier.ebde76f0.png"},"4eb3":function(e,t,o){e.exports=o.p+"img/golem.4a791883.png"},"4efd":function(e,t,o){e.exports=o.p+"img/minstrel.29c42f5b.png"},5072:function(e,t,o){e.exports=o.p+"img/exorcist.4d617582.png"},"50d1":function(e,t,o){},"557b":function(e,t,o){},"559e":function(e,t,o){e.exports=o.p+"img/harlot.403b3498.png"},"55aa":function(e,t,o){e.exports=o.p+"img/goon.eb004322.png"},5626:function(e,t,o){e.exports=o.p+"img/heretic.5f581ee2.png"},"56d7":function(e,t,o){"use strict";o.r(t);var i=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:{night:e.grimoire.isNight,static:e.grimoire.isStatic},style:{backgroundImage:e.grimoire.background?"url('"+e.grimoire.background+"')":""},attrs:{id:"app",tabindex:"-1"},on:{keyup:e.keyup}},[e.grimoire.background&&e.grimoire.background.match(/\.(mp4|webm)$/i)?o("video",{attrs:{id:"background",src:e.grimoire.background,autoplay:"",loop:""}}):e._e(),o("div",{staticClass:"backdrop"}),o("transition",{attrs:{name:"blur"}},[e.players.length?e._e():o("Intro"),e.players.length&&!e.session.nomination?o("TownInfo"):e._e(),e.session.nomination?o("Vote"):e._e()],1),o("TownSquare"),o("Menu",{ref:"menu"}),o("EditionModal"),o("FabledModal"),o("RolesModal"),o("ReferenceModal"),o("NightOrderModal"),o("VoteHistoryModal"),o("GameStateModal"),o("Gradients"),o("span",{attrs:{id:"version"}},[e._v("v"+e._s(e.version))])],1)},a=[],r=o("2f62"),n=o("9224"),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"square",class:{public:e.grimoire.isPublic,spectator:e.session.isSpectator,vote:e.session.nomination},attrs:{id:"townsquare"}},[o("ul",{staticClass:"circle",class:["size-"+e.players.length]},e._l(e.players,(function(t,i){return o("Player",{key:i,class:{from:Math.max(e.swap,e.move,e.nominate)===i,swap:e.swap>-1,move:e.move>-1,nominate:e.nominate>-1},attrs:{player:t},on:{trigger:function(t){return e.handleTrigger(i,t)}}})})),1),e.players.length?o("div",{ref:"bluffs",staticClass:"bluffs",class:{closed:!e.isBluffsOpen}},[o("h3",[e.session.isSpectator?o("span",[e._v("Other characters")]):o("span",[e._v("Demon bluffs")]),o("font-awesome-icon",{attrs:{icon:"times-circle"},on:{click:function(t){return t.stopPropagation(),e.toggleBluffs(t)}}}),o("font-awesome-icon",{attrs:{icon:"plus-circle"},on:{click:function(t){return t.stopPropagation(),e.toggleBluffs(t)}}})],1),o("ul",e._l(e.bluffSize,(function(t){return o("li",{key:t,on:{click:function(o){return e.openRoleModal(-1*t)}}},[o("Token",{attrs:{role:e.bluffs[t-1]}})],1)})),0)]):e._e(),e.fabled.length?o("div",{staticClass:"fabled",class:{closed:!e.isFabledOpen}},[o("h3",[o("span",[e._v("Fabled")]),o("font-awesome-icon",{attrs:{icon:"times-circle"},on:{click:function(t){return t.stopPropagation(),e.toggleFabled(t)}}}),o("font-awesome-icon",{attrs:{icon:"plus-circle"},on:{click:function(t){return t.stopPropagation(),e.toggleFabled(t)}}})],1),o("ul",e._l(e.fabled,(function(t,i){return o("li",{key:i,on:{click:function(t){return e.removeFabled(i)}}},[e.nightOrder.get(t).first&&e.grimoire.isNightOrder?o("div",{staticClass:"night-order first"},[o("em",[e._v(e._s(e.nightOrder.get(t).first)+".")]),t.firstNightReminder?o("span",[e._v(e._s(t.firstNightReminder))]):e._e()]):e._e(),e.nightOrder.get(t).other&&e.grimoire.isNightOrder?o("div",{staticClass:"night-order other"},[o("em",[e._v(e._s(e.nightOrder.get(t).other)+".")]),t.otherNightReminder?o("span",[e._v(e._s(t.otherNightReminder))]):e._e()]):e._e(),o("Token",{attrs:{role:t}})],1)})),0)]):e._e(),o("ReminderModal",{attrs:{"player-index":e.selectedPlayer}}),o("RoleModal",{attrs:{"player-index":e.selectedPlayer}})],1)},d=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{style:e.zoom},[i("div",{ref:"player",staticClass:"player",class:[{dead:e.player.isDead,marked:e.session.markedPlayer===e.index,"no-vote":e.player.isVoteless,you:e.session.sessionId&&e.player.id&&e.player.id===e.session.playerId,"vote-yes":e.session.votes[e.index],"vote-lock":e.voteLocked},e.player.role.team]},[i("div",{staticClass:"shroud",on:{click:function(t){return e.toggleStatus()}}}),i("div",{staticClass:"life",on:{click:function(t){return e.toggleStatus()}}}),e.nightOrder.get(e.player).first&&e.grimoire.isNightOrder?i("div",{staticClass:"night-order first"},[i("em",[e._v(e._s(e.nightOrder.get(e.player).first)+".")]),e.player.role.firstNightReminder?i("span",[e._v(e._s(e.player.role.firstNightReminder))]):e._e()]):e._e(),e.nightOrder.get(e.player).other&&e.grimoire.isNightOrder?i("div",{staticClass:"night-order other"},[i("em",[e._v(e._s(e.nightOrder.get(e.player).other)+".")]),e.player.role.otherNightReminder?i("span",[e._v(e._s(e.player.role.otherNightReminder))]):e._e()]):e._e(),i("Token",{attrs:{role:e.player.role},on:{"set-role":function(t){return e.$emit("trigger",["openRoleModal"])}}}),i("div",{staticClass:"overlay"},[i("font-awesome-icon",{staticClass:"vote",attrs:{icon:"hand-paper",title:"Hand UP"},on:{click:function(t){return e.vote()}}}),i("font-awesome-icon",{staticClass:"vote",attrs:{icon:"times",title:"Hand DOWN"},on:{click:function(t){return e.vote()}}}),i("font-awesome-icon",{staticClass:"cancel",attrs:{icon:"times-circle",title:"Cancel"},on:{click:function(t){return e.cancel()}}}),i("font-awesome-icon",{staticClass:"swap",attrs:{icon:"exchange-alt",title:"Swap seats with this player"},on:{click:function(t){return e.swapPlayer(e.player)}}}),i("font-awesome-icon",{staticClass:"move",attrs:{icon:"redo-alt",title:"Move player to this seat"},on:{click:function(t){return e.movePlayer(e.player)}}}),i("font-awesome-icon",{staticClass:"nominate",attrs:{icon:"hand-point-right",title:"Nominate this player"},on:{click:function(t){return e.nominatePlayer(e.player)}}})],1),e.player.id&&e.session.sessionId?i("font-awesome-icon",{staticClass:"seat",class:{highlight:e.session.isRolesDistributed},attrs:{icon:"chair"}}):e._e(),e.player.isDead&&!e.player.isVoteless?i("font-awesome-icon",{staticClass:"has-vote",attrs:{icon:"vote-yea",title:"Ghost vote"},on:{click:function(t){return e.updatePlayer("isVoteless",!0)}}}):e._e(),i("div",{staticClass:"marked"},[i("font-awesome-icon",{attrs:{icon:"skull"}})],1),i("div",{staticClass:"name",class:{active:e.isMenuOpen},on:{click:function(t){e.isMenuOpen=!e.isMenuOpen}}},[i("span",[e._v(e._s(e.player.name))]),e.player.pronouns?i("font-awesome-icon",{attrs:{icon:"venus-mars"}}):e._e(),e.player.pronouns?i("div",{staticClass:"pronouns"},[i("span",[e._v(e._s(e.player.pronouns))])]):e._e()],1),i("transition",{attrs:{name:"fold"}},[e.isMenuOpen?i("ul",{staticClass:"menu"},[!e.session.isSpectator||e.session.isSpectator&&e.player.id===e.session.playerId?i("li",{on:{click:e.changePronouns}},[i("font-awesome-icon",{attrs:{icon:"venus-mars"}}),e._v("Change Pronouns ")],1):e._e(),e.session.isSpectator?e._e():[i("li",{on:{click:e.changeName}},[i("font-awesome-icon",{attrs:{icon:"user-edit"}}),e._v("Rename ")],1),i("li",{class:{disabled:e.session.lockedVote},on:{click:function(t){return e.movePlayer()}}},[i("font-awesome-icon",{attrs:{icon:"redo-alt"}}),e._v(" Move player ")],1),i("li",{class:{disabled:e.session.lockedVote},on:{click:function(t){return e.swapPlayer()}}},[i("font-awesome-icon",{attrs:{icon:"exchange-alt"}}),e._v(" Swap seats ")],1),i("li",{class:{disabled:e.session.lockedVote},on:{click:e.removePlayer}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}}),e._v(" Remove ")],1),e.player.id&&e.session.sessionId?i("li",{on:{click:function(t){return e.updatePlayer("id","",!0)}}},[i("font-awesome-icon",{attrs:{icon:"chair"}}),e._v(" Empty seat ")],1):e._e(),e.session.nomination?e._e():[i("li",{on:{click:function(t){return e.nominatePlayer()}}},[i("font-awesome-icon",{attrs:{icon:"hand-point-right"}}),e._v(" Nomination ")],1)]],e.session.isSpectator?i("li",{class:{disabled:e.player.id&&e.player.id!==e.session.playerId},on:{click:e.claimSeat}},[i("font-awesome-icon",{attrs:{icon:"chair"}}),e.player.id?e.player.id===e.session.playerId?[e._v(" Vacate seat ")]:[e._v(" Seat occupied")]:[e._v(" Claim seat ")]],2):e._e()],2):e._e()])],1),e.player.reminders?e._l(e.player.reminders,(function(t){return i("div",{key:t.role+" "+t.name,staticClass:"reminder",class:[t.role],on:{click:function(o){return e.removeReminder(t)}}},[i("span",{staticClass:"icon",style:{backgroundImage:"url("+(t.image&&e.grimoire.isImageOptIn?t.image:o("61b0")("./"+(t.imageAlt||t.role)+".png"))+")"}}),i("span",{staticClass:"text"},[e._v(e._s(t.name))])])})):e._e(),i("div",{staticClass:"reminder add",on:{click:function(t){return e.$emit("trigger",["openReminderModal"])}}},[i("span",{staticClass:"icon"})])],2)},m=[],h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"token",class:[e.role.id],on:{click:e.setRole}},[e.role.id?i("span",{staticClass:"icon",style:{backgroundImage:"url("+(e.role.image&&e.grimoire.isImageOptIn?e.role.image:o("61b0")("./"+(e.role.imageAlt||e.role.id)+".png"))+")"}}):e._e(),e.role.firstNight||e.role.firstNightReminder?i("span",{staticClass:"leaf-left"}):e._e(),e.role.otherNight||e.role.otherNightReminder?i("span",{staticClass:"leaf-right"}):e._e(),e.reminderLeaves?i("span",{class:["leaf-top"+e.reminderLeaves]}):e._e(),e.role.setup?i("span",{staticClass:"leaf-orange"}):e._e(),i("svg",{staticClass:"name",attrs:{viewBox:"0 0 150 150"}},[i("path",{attrs:{d:"M 13 75 C 13 160, 138 160, 138 75",id:"curve",fill:"transparent"}}),i("text",{staticClass:"label mozilla",attrs:{width:"150",x:"66.6%","text-anchor":"middle","font-size":e._f("nameToFontSize")(e.role.name)}},[i("textPath",{attrs:{"xlink:href":"#curve"}},[e._v(" "+e._s(e.role.name)+" ")])])]),i("div",{staticClass:"edition",class:["edition-"+e.role.edition,e.role.team]}),e.role.ability?i("div",{staticClass:"ability"},[e._v(" "+e._s(e.role.ability)+" ")]):e._e()])},p=[],g={name:"Token",props:{role:{type:Object,default:()=>({})}},computed:{reminderLeaves:function(){return(this.role.reminders||[]).length+(this.role.remindersGlobal||[]).length},...Object(r["d"])(["grimoire"])},data(){return{}},filters:{nameToFontSize:e=>e&&e.length>10?"90%":"110%"},methods:{setRole(){this.$emit("set-role")}}},u=g,f=(o("5720"),o("2877")),b=Object(f["a"])(u,h,p,!1,null,"deec739a",null),y=b.exports,v={components:{Token:y},props:{player:{type:Object,required:!0}},computed:{...Object(r["d"])("players",["players"]),...Object(r["d"])(["grimoire","session"]),...Object(r["b"])({nightOrder:"players/nightOrder"}),index:function(){return this.players.indexOf(this.player)},voteLocked:function(){const e=this.session,t=this.players.length;if(!e.nomination)return!1;const o=(this.index-1+t-e.nomination[1])%t;return o<e.lockedVote-1},zoom:function(){const e=window.innerWidth>window.innerHeight?"vh":"vw";return this.players.length<7?{width:18+this.grimoire.zoom+e}:this.players.length<=10?{width:16+this.grimoire.zoom+e}:this.players.length<=15?{width:14+this.grimoire.zoom+e}:{width:12+this.grimoire.zoom+e}}},data(){return{isMenuOpen:!1,isSwap:!1}},methods:{changePronouns(){if(this.session.isSpectator&&this.player.id!==this.session.playerId)return;const e=prompt("Player pronouns",this.player.pronouns);null!==e&&this.updatePlayer("pronouns",e,!0)},toggleStatus(){this.grimoire.isPublic?this.player.isDead?this.player.isVoteless?(this.updatePlayer("isVoteless",!1),this.updatePlayer("isDead",!1)):this.updatePlayer("isVoteless",!0):(this.updatePlayer("isDead",!0),this.player.isMarked&&this.updatePlayer("isMarked",!1)):(this.updatePlayer("isDead",!this.player.isDead),this.player.isMarked&&this.updatePlayer("isMarked",!1),this.player.isVoteless&&this.updatePlayer("isVoteless",!1))},changeName(){if(this.session.isSpectator)return;const e=prompt("Player name",this.player.name)||this.player.name;this.updatePlayer("name",e,!0)},removeReminder(e){const t=[...this.player.reminders];t.splice(this.player.reminders.indexOf(e),1),this.updatePlayer("reminders",t,!0)},updatePlayer(e,t,o=!1){this.session.isSpectator&&"reminders"!==e&&"pronouns"!==e||(this.$store.commit("players/update",{player:this.player,property:e,value:t}),o&&(this.isMenuOpen=!1))},removePlayer(){this.isMenuOpen=!1,this.$emit("trigger",["removePlayer"])},swapPlayer(e){this.isMenuOpen=!1,this.$emit("trigger",["swapPlayer",e])},movePlayer(e){this.isMenuOpen=!1,this.$emit("trigger",["movePlayer",e])},nominatePlayer(e){this.isMenuOpen=!1,this.$emit("trigger",["nominatePlayer",e])},cancel(){this.$emit("trigger",["cancel"])},claimSeat(){this.isMenuOpen=!1,this.$emit("trigger",["claimSeat"])},vote(){this.session.isSpectator||this.voteLocked&&this.$store.commit("session/voteSync",[this.index,!this.session.votes[this.index]])}}},N=v,k=(o("74c9"),Object(f["a"])(N,c,m,!1,null,null,null)),_=k.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.modals.reminder&&e.availableReminders.length&&e.players[e.playerIndex]?i("Modal",{on:{close:function(t){return e.toggleModal("reminder")}}},[i("h3",[e._v("Choose a reminder token:")]),i("ul",{staticClass:"reminders"},e._l(e.availableReminders,(function(t){return i("li",{key:t.role+" "+t.name,staticClass:"reminder",class:[t.role],on:{click:function(o){return e.addReminder(t)}}},[i("span",{staticClass:"icon",style:{backgroundImage:"url("+(t.image&&e.grimoire.isImageOptIn?t.image:o("61b0")("./"+(t.imageAlt||t.role)+".png"))+")"}}),i("span",{staticClass:"text"},[e._v(e._s(t.name))])])})),0)]):e._e()},S=[],R=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"modal-fade"}},[o("div",{staticClass:"modal-backdrop",on:{click:e.close}},[o("div",{staticClass:"modal",class:{maximized:e.isMaximized},attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},on:{click:function(e){e.stopPropagation()}}},[o("div",{staticClass:"top-right-buttons"},[o("font-awesome-icon",{staticClass:"top-right-button",attrs:{icon:["fas",e.isMaximized?"window-minimize":"window-maximize"]},on:{click:function(t){e.isMaximized=!e.isMaximized}}}),o("font-awesome-icon",{staticClass:"top-right-button",attrs:{icon:"times-circle"},on:{click:e.close}})],1),o("div",{staticClass:"slot"},[e._t("default")],2)])])])},x=[],j={data:function(){return{isMaximized:!1}},methods:{close(){this.$emit("close")}}},M=j,I=(o("8781"),Object(f["a"])(M,R,x,!1,null,null,null)),O=I.exports;const C=({id:e,image:t,imageAlt:o})=>i=>({role:e,image:t,imageAlt:o,name:i});var P={components:{Modal:O},props:["playerIndex"],computed:{availableReminders(){let e=[];const{players:t,bluffs:o}=this.$store.state.players;return this.$store.state.roles.forEach(i=>{(t.some(e=>e.role.id===i.id)||o.some(e=>e.id===i.id))&&(e=[...e,...i.reminders.map(C(i))]),i.remindersGlobal&&i.remindersGlobal.length&&(e=[...e,...i.remindersGlobal.map(C(i))])}),this.$store.state.players.fabled.forEach(t=>{e=[...e,...t.reminders.map(C(t))]}),this.$store.state.otherTravelers.forEach(o=>{t.some(e=>e.role.id===o.id)&&(e=[...e,...o.reminders.map(C(o))])}),e.push({role:"good",name:"Good"}),e.push({role:"evil",name:"Evil"}),e.push({role:"custom",name:"Custom note"}),e},...Object(r["d"])(["modals","grimoire"]),...Object(r["d"])("players",["players"])},methods:{addReminder(e){const t=this.$store.state.players.players[this.playerIndex];let o;if("custom"===e.role){const e=prompt("Add a custom reminder note");if(!e)return;o=[...t.reminders,{role:"custom",name:e}]}else o=[...t.reminders,e];this.$store.commit("players/update",{player:t,property:"reminders",value:o}),this.$store.commit("toggleModal","reminder")},...Object(r["c"])(["toggleModal"])}},T=P,D=(o("740e"),Object(f["a"])(T,w,S,!1,null,"334686bc",null)),V=D.exports,E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.modals.role&&e.availableRoles.length?o("Modal",{on:{close:e.close}},[o("h3",[e._v(" Choose a new character for "+e._s(e.playerIndex>=0&&e.players.length?e.players[e.playerIndex].name:"bluffing")+" ")]),"editionRoles"!==e.tab&&e.otherTravelers.size?e._e():o("ul",{staticClass:"tokens"},e._l(e.availableRoles,(function(t){return o("li",{key:t.id,class:[t.team],on:{click:function(o){return e.setRole(t)}}},[o("Token",{attrs:{role:t}})],1)})),0),"otherTravelers"===e.tab&&e.otherTravelers.size?o("ul",{staticClass:"tokens"},e._l(e.otherTravelers.values(),(function(t){return o("li",{key:t.id,class:[t.team],on:{click:function(o){return e.setRole(t)}}},[o("Token",{attrs:{role:t}})],1)})),0):e._e(),e.playerIndex>=0&&e.otherTravelers.size&&!e.session.isSpectator?o("div",{staticClass:"button-group"},[o("span",{staticClass:"button",class:{townsfolk:"editionRoles"===e.tab},on:{click:function(t){e.tab="editionRoles"}}},[e._v("Edition Roles")]),o("span",{staticClass:"button",class:{townsfolk:"otherTravelers"===e.tab},on:{click:function(t){e.tab="otherTravelers"}}},[e._v("Other Travelers")])]):e._e()]):e._e()},q=[],A={components:{Token:y,Modal:O},props:["playerIndex"],computed:{availableRoles(){const e=[],t=this.$store.state.players.players;return this.$store.state.roles.forEach(o=>{(this.playerIndex>=0||this.playerIndex<0&&!t.some(e=>e.role.id===o.id))&&e.push(o)}),e.push({}),e},...Object(r["d"])(["modals","roles","session"]),...Object(r["d"])("players",["players"]),...Object(r["d"])(["otherTravelers"])},data(){return{tab:"editionRoles"}},methods:{setRole(e){if(this.playerIndex<0)this.$store.commit("players/setBluff",{index:-1*this.playerIndex-1,role:e});else{if(this.session.isSpectator&&"traveler"===e.team)return;const t=this.$store.state.players.players[this.playerIndex];this.$store.commit("players/update",{player:t,property:"role",value:e})}this.tab="editionRoles",this.$store.commit("toggleModal","role")},close(){this.tab="editionRoles",this.toggleModal("role")},...Object(r["c"])(["toggleModal"])}},$=A,F=(o("23ca"),Object(f["a"])($,E,q,!1,null,"2e3008b9",null)),z=F.exports,L={components:{Player:_,Token:y,RoleModal:z,ReminderModal:V},computed:{...Object(r["b"])({nightOrder:"players/nightOrder"}),...Object(r["d"])(["grimoire","roles","session"]),...Object(r["d"])("players",["players","bluffs","fabled"])},data(){return{selectedPlayer:0,bluffSize:3,swap:-1,move:-1,nominate:-1,isBluffsOpen:!0,isFabledOpen:!0}},methods:{toggleBluffs(){this.isBluffsOpen=!this.isBluffsOpen},toggleFabled(){this.isFabledOpen=!this.isFabledOpen},removeFabled(e){this.session.isSpectator||this.$store.commit("players/setFabled",{index:e})},handleTrigger(e,[t,o]){"function"===typeof this[t]&&this[t](e,o)},claimSeat(e){this.session.isSpectator&&(this.session.playerId===this.players[e].id?this.$store.commit("session/claimSeat",-1):this.$store.commit("session/claimSeat",e))},openReminderModal(e){this.selectedPlayer=e,this.$store.commit("toggleModal","reminder")},openRoleModal(e){const t=this.players[e];this.session.isSpectator&&t&&"traveler"===t.role.team||(this.selectedPlayer=e,this.$store.commit("toggleModal","role"))},removePlayer(e){if(!this.session.isSpectator&&!this.session.lockedVote&&confirm(`Do you really want to remove ${this.players[e].name}?`)){const{nomination:t}=this.session;t&&(t.includes(e)?this.$store.commit("session/nomination"):(t[0]>e||t[1]>e)&&this.$store.commit("session/setNomination",[t[0]>e?t[0]-1:t[0],t[1]>e?t[1]-1:t[1]])),this.$store.commit("players/remove",e)}},swapPlayer(e,t){if(!this.session.isSpectator&&!this.session.lockedVote)if(void 0===t)this.cancel(),this.swap=e;else{if(this.session.nomination){const e=this.players.indexOf(t),o=this.session.nomination.map(t=>t===this.swap?e:t===e?this.swap:t);this.session.nomination[0]===o[0]&&this.session.nomination[1]===o[1]||this.$store.commit("session/setNomination",o)}this.$store.commit("players/swap",[this.swap,this.players.indexOf(t)]),this.cancel()}},movePlayer(e,t){if(!this.session.isSpectator&&!this.session.lockedVote)if(void 0===t)this.cancel(),this.move=e;else{if(this.session.nomination){const e=this.players.indexOf(t),o=this.session.nomination.map(t=>t===this.move?e:t>this.move&&t<=e?t-1:t<this.move&&t>=e?t+1:t);this.session.nomination[0]===o[0]&&this.session.nomination[1]===o[1]||this.$store.commit("session/setNomination",o)}this.$store.commit("players/move",[this.move,this.players.indexOf(t)]),this.cancel()}},nominatePlayer(e,t){if(!this.session.isSpectator&&!this.session.lockedVote)if(void 0===t)this.cancel(),e!==this.nominate&&(this.nominate=e);else{const e=[this.nominate,this.players.indexOf(t)];this.$store.commit("session/nomination",{nomination:e}),this.cancel()}},cancel(){this.move=-1,this.swap=-1,this.nominate=-1}}},G=L,H=(o("3636"),Object(f["a"])(G,l,d,!1,null,null,null)),B=H.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"info"},[i("li",{staticClass:"edition",class:["edition-"+e.edition.id],style:{backgroundImage:"url("+(e.edition.logo&&e.grimoire.isImageOptIn?e.edition.logo:o("ce23")("./"+e.edition.id+".png"))+")"}}),e.players.length-e.teams.traveler<5?i("li",[e._v(" Please add more players! ")]):e._e(),i("li",[e.edition.isOfficial?e._e():i("span",{staticClass:"meta"},[e._v(" "+e._s(e.edition.name)+" "+e._s(e.edition.author?"by "+e.edition.author:"")+" ")]),i("span",[e._v(" "+e._s(e.players.length)+" "),i("font-awesome-icon",{staticClass:"players",attrs:{icon:"users"}})],1),i("span",[e._v(" "+e._s(e.teams.alive)+" "),i("font-awesome-icon",{staticClass:"alive",attrs:{icon:"heartbeat"}})],1),i("span",[e._v(" "+e._s(e.teams.votes)+" "),i("font-awesome-icon",{staticClass:"votes",attrs:{icon:"vote-yea"}})],1)]),e.players.length-e.teams.traveler>=5?i("li",[i("span",[e._v(" "+e._s(e.teams.townsfolk)+" "),i("font-awesome-icon",{staticClass:"townsfolk",attrs:{icon:"user-friends"}})],1),i("span",[e._v(" "+e._s(e.teams.outsider)+" "),i("font-awesome-icon",{staticClass:"outsider",attrs:{icon:e.teams.outsider>1?"user-friends":"user"}})],1),i("span",[e._v(" "+e._s(e.teams.minion)+" "),i("font-awesome-icon",{staticClass:"minion",attrs:{icon:e.teams.minion>1?"user-friends":"user"}})],1),i("span",[e._v(" "+e._s(e.teams.demon)+" "),i("font-awesome-icon",{staticClass:"demon",attrs:{icon:e.teams.demon>1?"user-friends":"user"}})],1),e.teams.traveler?i("span",[e._v(" "+e._s(e.teams.traveler)+" "),i("font-awesome-icon",{staticClass:"traveler",attrs:{icon:e.teams.traveler>1?"user-friends":"user"}})],1):e._e(),e.grimoire.isNight?i("span",[e._v(" Night phase "),i("font-awesome-icon",{attrs:{icon:["fas","cloud-moon"]}})],1):e._e()]):e._e()])},J=[],W=o("634a"),Y={computed:{teams:function(){const{players:e}=this.$store.state.players,t=this.$store.getters["players/nonTravelers"],o=e.filter(e=>!0!==e.isDead).length;return{...W[t-5],traveler:e.length-t,alive:o,votes:o+e.filter(e=>!0===e.isDead&&!0!==e.isVoteless).length}},...Object(r["d"])(["edition","grimoire"]),...Object(r["d"])("players",["players"])}},K=Y,Z=(o("c5bf"),Object(f["a"])(K,U,J,!1,null,"e858a1da",null)),Q=Z.exports,X=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"controls"}},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.session.voteHistory.length&&e.session.sessionId,expression:"session.voteHistory.length && session.sessionId"}],staticClass:"nomlog-summary",attrs:{title:e.session.voteHistory.length+" recent "+(1==e.session.voteHistory.length?"nomination":"nominations")},on:{click:function(t){return e.toggleModal("voteHistory")}}},[o("font-awesome-icon",{attrs:{icon:"book-dead"}}),e._v(" "+e._s(e.session.voteHistory.length)+" ")],1),e.session.sessionId?o("span",{staticClass:"session",class:{spectator:e.session.isSpectator,reconnecting:e.session.isReconnecting},attrs:{title:e.session.playerCount+" other players in this session"+(e.session.ping?" ("+e.session.ping+"ms latency)":"")},on:{click:e.leaveSession}},[o("font-awesome-icon",{attrs:{icon:"broadcast-tower"}}),e._v(" "+e._s(e.session.playerCount)+" ")],1):e._e(),o("div",{staticClass:"menu",class:{open:e.grimoire.isMenuOpen}},[o("font-awesome-icon",{attrs:{icon:"cog"},on:{click:e.toggleMenu}}),o("ul",[o("li",{staticClass:"tabs",class:e.tab},[o("font-awesome-icon",{attrs:{icon:"book-open"},on:{click:function(t){e.tab="grimoire"}}}),o("font-awesome-icon",{attrs:{icon:"broadcast-tower"},on:{click:function(t){e.tab="session"}}}),e.session.isSpectator?e._e():o("font-awesome-icon",{attrs:{icon:"users"},on:{click:function(t){e.tab="players"}}}),o("font-awesome-icon",{attrs:{icon:"theater-masks"},on:{click:function(t){e.tab="characters"}}}),o("font-awesome-icon",{attrs:{icon:"question"},on:{click:function(t){e.tab="help"}}})],1),"grimoire"===e.tab?[o("li",{staticClass:"headline"},[e._v("Grimoire")]),e.players.length?o("li",{on:{click:e.toggleGrimoire}},[e.grimoire.isPublic?e._e():[e._v("Hide")],e.grimoire.isPublic?[e._v("Show")]:e._e(),o("em",[e._v("[G]")])],2):e._e(),e.session.isSpectator?e._e():o("li",{on:{click:e.toggleNight}},[e.grimoire.isNight?e._e():[e._v("Switch to Night")],e.grimoire.isNight?[e._v("Switch to Day")]:e._e(),o("em",[e._v("[S]")])],2),e.players.length?o("li",{on:{click:e.toggleNightOrder}},[e._v(" Night order "),o("em",[o("font-awesome-icon",{attrs:{icon:["fas",e.grimoire.isNightOrder?"check-square":"square"]}})],1)]):e._e(),e.players.length?o("li",[e._v(" Zoom "),o("em",[o("font-awesome-icon",{attrs:{icon:"search-minus"},on:{click:function(t){return e.setZoom(e.grimoire.zoom-1)}}}),e._v(" "+e._s(Math.round(100+10*e.grimoire.zoom))+"% "),o("font-awesome-icon",{attrs:{icon:"search-plus"},on:{click:function(t){return e.setZoom(e.grimoire.zoom+1)}}})],1)]):e._e(),o("li",{on:{click:e.setBackground}},[e._v(" Background image "),o("em",[o("font-awesome-icon",{attrs:{icon:"image"}})],1)]),e.edition.isOfficial?e._e():o("li",{on:{click:e.imageOptIn}},[o("small",[e._v("Show Custom Images")]),o("em",[o("font-awesome-icon",{attrs:{icon:["fas",e.grimoire.isImageOptIn?"check-square":"square"]}})],1)]),o("li",{on:{click:e.toggleStatic}},[e._v(" Disable Animations "),o("em",[o("font-awesome-icon",{attrs:{icon:["fas",e.grimoire.isStatic?"check-square":"square"]}})],1)]),o("li",{on:{click:e.toggleMuted}},[e._v(" Mute Sounds "),o("em",[o("font-awesome-icon",{attrs:{icon:["fas",e.grimoire.isMuted?"volume-mute":"volume-up"]}})],1)])]:e._e(),"session"===e.tab?[e.session.sessionId?o("li",{staticClass:"headline"},[e._v(" "+e._s(e.session.isSpectator?"Playing":"Hosting")+" ")]):o("li",{staticClass:"headline"},[e._v(" Live Session ")]),e.session.sessionId?[e.session.ping?o("li",[e._v(" Delay to "+e._s(e.session.isSpectator?"host":"players")+" "),o("em",[e._v(e._s(e.session.ping)+"ms")])]):e._e(),o("li",{on:{click:e.copySessionUrl}},[e._v(" Copy player link "),o("em",[o("font-awesome-icon",{attrs:{icon:"copy"}})],1)]),e.session.isSpectator?e._e():o("li",{on:{click:e.distributeRoles}},[e._v(" Send Characters "),o("em",[o("font-awesome-icon",{attrs:{icon:"theater-masks"}})],1)]),e.session.voteHistory.length||!e.session.isSpectator?o("li",{on:{click:function(t){return e.toggleModal("voteHistory")}}},[e._v(" Vote history"),o("em",[e._v("[V]")])]):e._e(),o("li",{on:{click:e.leaveSession}},[e._v(" Leave Session "),o("em",[e._v(e._s(e.session.sessionId))])])]:[o("li",{on:{click:e.hostSession}},[e._v("Host (Storyteller)"),o("em",[e._v("[H]")])]),o("li",{on:{click:e.joinSession}},[e._v("Join (Player)"),o("em",[e._v("[J]")])])]]:e._e(),"players"!==e.tab||e.session.isSpectator?e._e():[o("li",{staticClass:"headline"},[e._v("Players")]),e.players.length<20?o("li",{on:{click:e.addPlayer}},[e._v("Add"),o("em",[e._v("[A]")])]):e._e(),e.players.length>2?o("li",{on:{click:e.randomizeSeatings}},[e._v(" Randomize "),o("em",[o("font-awesome-icon",{attrs:{icon:"dice"}})],1)]):e._e(),e.players.length?o("li",{on:{click:e.clearPlayers}},[e._v(" Remove all "),o("em",[o("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)]):e._e()],"characters"===e.tab?[o("li",{staticClass:"headline"},[e._v("Characters")]),e.session.isSpectator?e._e():o("li",{on:{click:function(t){return e.toggleModal("edition")}}},[e._v(" Select Edition "),o("em",[e._v("[E]")])]),!e.session.isSpectator&&e.players.length>4?o("li",{on:{click:function(t){return e.toggleModal("roles")}}},[e._v(" Choose & Assign "),o("em",[e._v("[C]")])]):e._e(),e.session.isSpectator?e._e():o("li",{on:{click:function(t){return e.toggleModal("fabled")}}},[e._v(" Add Fabled "),o("em",[o("font-awesome-icon",{attrs:{icon:"dragon"}})],1)]),e.players.length?o("li",{on:{click:e.clearRoles}},[e._v(" Remove all "),o("em",[o("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)]):e._e()]:e._e(),"help"===e.tab?[o("li",{staticClass:"headline"},[e._v("Help")]),o("li",{on:{click:function(t){return e.toggleModal("reference")}}},[e._v(" Reference Sheet "),o("em",[e._v("[R]")])]),o("li",{on:{click:function(t){return e.toggleModal("nightOrder")}}},[e._v(" Night Order Sheet "),o("em",[e._v("[N]")])]),o("li",{on:{click:function(t){return e.toggleModal("gameState")}}},[e._v(" Game State JSON "),o("em",[o("font-awesome-icon",{attrs:{icon:"file-code"}})],1)]),o("li",[o("a",{attrs:{href:"https://discord.gg/Gd7ybwWbFk",target:"_blank"}},[e._v(" Join Discord ")]),o("em",[o("a",{attrs:{href:"https://discord.gg/Gd7ybwWbFk",target:"_blank"}},[o("font-awesome-icon",{attrs:{icon:["fab","discord"]}})],1)])]),o("li",[o("a",{attrs:{href:"https://github.com/bra1n/townsquare",target:"_blank"}},[e._v(" Source code ")]),o("em",[o("a",{attrs:{href:"https://github.com/bra1n/townsquare",target:"_blank"}},[o("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)])])]:e._e()],2)],1)])},ee=[],te={computed:{...Object(r["d"])(["grimoire","session","edition"]),...Object(r["d"])("players",["players"])},data(){return{tab:"grimoire"}},methods:{setBackground(){const e=prompt("Enter custom background URL");(e||""===e)&&this.$store.commit("setBackground",e)},hostSession(){if(this.session.sessionId)return;const e=prompt("Enter a channel number / name for your session",Math.round(1e4*Math.random()));e&&(this.$store.commit("session/clearVoteHistory"),this.$store.commit("session/setSpectator",!1),this.$store.commit("session/setSessionId",e),this.copySessionUrl())},copySessionUrl(){const e=window.location.href.split("#")[0],t=e+"#"+this.session.sessionId;navigator.clipboard.writeText(t)},distributeRoles(){if(this.session.isSpectator)return;const e="Do you want to distribute assigned characters to all SEATED players?";confirm(e)&&(this.$store.commit("session/distributeRoles",!0),setTimeout((()=>{this.$store.commit("session/distributeRoles",!1)}).bind(this),2e3))},imageOptIn(){const e="Are you sure you want to allow custom images? A malicious script file author might track your IP address this way.";(this.grimoire.isImageOptIn||confirm(e))&&this.toggleImageOptIn()},joinSession(){if(this.session.sessionId)return this.leaveSession();let e=prompt("Enter the channel number / name of the session you want to join");e.match(/^https?:\/\//i)&&(e=e.split("#").pop()),e&&(this.$store.commit("session/clearVoteHistory"),this.$store.commit("session/setSpectator",!0),this.$store.commit("toggleGrimoire",!1),this.$store.commit("session/setSessionId",e))},leaveSession(){confirm("Are you sure you want to leave the active live game?")&&(this.$store.commit("session/setSpectator",!1),this.$store.commit("session/setSessionId",""))},addPlayer(){if(this.session.isSpectator)return;if(this.players.length>=20)return;const e=prompt("Player name");e&&this.$store.commit("players/add",e)},randomizeSeatings(){this.session.isSpectator||confirm("Are you sure you want to randomize seatings?")&&this.$store.dispatch("players/randomize")},clearPlayers(){this.session.isSpectator||confirm("Are you sure you want to remove all players?")&&(this.session.nomination&&this.$store.commit("session/nomination"),this.$store.commit("players/clear"))},clearRoles(){confirm("Are you sure you want to remove all player roles?")&&this.$store.dispatch("players/clearRoles")},toggleNight(){this.$store.commit("toggleNight"),this.grimoire.isNight&&this.$store.commit("session/setMarkedPlayer",-1)},...Object(r["c"])(["toggleGrimoire","toggleMenu","toggleImageOptIn","toggleMuted","toggleNightOrder","toggleStatic","setZoom","toggleModal"])}},oe=te,ie=(o("2176"),Object(f["a"])(oe,X,ee,!1,null,"84ed831a",null)),se=ie.exports,ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.modals.roles&&e.nonTravelers>=5?o("Modal",{staticClass:"roles",on:{close:function(t){return e.toggleModal("roles")}}},[o("h3",[e._v("Select the characters for "+e._s(e.nonTravelers)+" players:")]),e._l(e.roleSelection,(function(t,i){return o("ul",{key:i,staticClass:"tokens"},[o("li",{staticClass:"count",class:[i]},[e._v(" "+e._s(t.reduce((function(e,t){var o=t.selected;return e+o}),0))+" / "+e._s(e.game[e.nonTravelers-5][i])+" ")]),e._l(t,(function(t){return o("li",{key:t.id,class:[t.team,t.selected?"selected":""],on:{click:function(e){t.selected=t.selected?0:1}}},[o("Token",{attrs:{role:t}}),t.setup?o("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}):e._e(),e.allowMultiple?o("div",{staticClass:"buttons"},[o("font-awesome-icon",{attrs:{icon:"minus-circle"},on:{click:function(e){e.stopPropagation(),t.selected--}}}),o("span",[e._v(e._s(t.selected>1?"x"+t.selected:""))]),o("font-awesome-icon",{attrs:{icon:"plus-circle"},on:{click:function(e){e.stopPropagation(),t.selected++}}})],1):e._e()],1)}))],2)})),e.hasSelectedSetupRoles?o("div",{staticClass:"warning"},[o("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),o("span",[e._v(" Warning: there are characters selected that modify the game setup! The randomizer does not account for these characters. ")])],1):e._e(),o("label",{staticClass:"multiple",class:{checked:e.allowMultiple}},[o("font-awesome-icon",{attrs:{icon:e.allowMultiple?"check-square":"square"}}),o("input",{directives:[{name:"model",rawName:"v-model",value:e.allowMultiple,expression:"allowMultiple"}],attrs:{type:"checkbox",name:"allow-multiple"},domProps:{checked:Array.isArray(e.allowMultiple)?e._i(e.allowMultiple,null)>-1:e.allowMultiple},on:{change:function(t){var o=e.allowMultiple,i=t.target,s=!!i.checked;if(Array.isArray(o)){var a=null,r=e._i(o,a);i.checked?r<0&&(e.allowMultiple=o.concat([a])):r>-1&&(e.allowMultiple=o.slice(0,r).concat(o.slice(r+1)))}else e.allowMultiple=s}}}),e._v(" Allow duplicate characters ")],1),o("div",{staticClass:"button-group"},[o("div",{staticClass:"button",class:{disabled:e.selectedRoles>e.nonTravelers||!e.selectedRoles},on:{click:e.assignRoles}},[o("font-awesome-icon",{attrs:{icon:"people-arrows"}}),e._v(" Assign "+e._s(e.selectedRoles)+" characters randomly ")],1),o("div",{staticClass:"button",on:{click:e.selectRandomRoles}},[o("font-awesome-icon",{attrs:{icon:"random"}}),e._v(" Shuffle characters ")],1)])],2):e._e()},re=[];const ne=e=>e[Math.floor(Math.random()*e.length)];var le={components:{Token:y,Modal:O},data:function(){return{roleSelection:{},game:W,allowMultiple:!1}},computed:{selectedRoles:function(){return Object.values(this.roleSelection).map(e=>e.reduce((e,{selected:t})=>e+t,0)).reduce((e,t)=>e+t,0)},hasSelectedSetupRoles:function(){return Object.values(this.roleSelection).some(e=>e.some(e=>e.selected&&e.setup))},...Object(r["d"])(["roles","modals"]),...Object(r["d"])("players",["players"]),...Object(r["b"])({nonTravelers:"players/nonTravelers"})},methods:{selectRandomRoles(){this.roleSelection={},this.roles.forEach(e=>{this.roleSelection[e.team]||this.$set(this.roleSelection,e.team,[]),this.roleSelection[e.team].push(e),this.$set(e,"selected",0)}),delete this.roleSelection["traveler"];const e=Math.max(5,this.nonTravelers),t=this.game[e-5];Object.keys(t).forEach(e=>{for(let o=0;o<t[e];o++)if(this.roleSelection[e]){const t=this.roleSelection[e].filter(e=>!e.selected);t.length&&(ne(t).selected=1)}})},assignRoles(){if(this.selectedRoles<=this.nonTravelers&&this.selectedRoles){const e=Object.values(this.roleSelection).map(e=>e.reduce((e,t)=>[...e,...Array(t.selected).fill(t)],[])).reduce((e,t)=>[...e,...t],[]).map(e=>[Math.random(),e]).sort((e,t)=>e[0]-t[0]).map(e=>e[1]);this.players.forEach(t=>{if("traveler"!==t.role.team&&e.length){const o=e.pop();this.$store.commit("players/update",{player:t,property:"role",value:o})}}),this.$store.commit("toggleModal","roles")}},...Object(r["c"])(["toggleModal"])},mounted:function(){Object.keys(this.roleSelection).length||this.selectRandomRoles()},watch:{roles(){this.selectRandomRoles()}}},de=le,ce=(o("8970"),Object(f["a"])(de,ae,re,!1,null,"365502ca",null)),me=ce.exports,he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.modals.edition?i("Modal",{staticClass:"editions",on:{close:function(t){return e.toggleModal("edition")}}},[e.isCustom?i("div",{staticClass:"custom"},[i("h3",[e._v("Load custom script / characters")]),e._v(" To play with a custom script, you need to select the characters you want to play with in the official "),i("a",{attrs:{href:"https://bloodontheclocktower.com/script-tool/",target:"_blank"}},[e._v("Script Tool")]),e._v(' and then upload the generated "custom-list.json" either directly here or provide a URL to such a hosted JSON file.'),i("br"),i("br"),e._v(" To play with custom characters, please read "),i("a",{attrs:{href:"https://github.com/bra1n/townsquare#custom-characters",target:"_blank"}},[e._v("the documentation")]),e._v(" on how to write a custom character definition file. "),i("b",[e._v("Only load custom JSON files from sources that you trust!")]),i("h3",[e._v("Some popular custom scripts:")]),i("ul",{staticClass:"scripts"},e._l(e.scripts,(function(t,o){return i("li",{key:o,on:{click:function(o){return e.handleURL(t[1])}}},[e._v(" "+e._s(t[0])+" ")])})),0),i("input",{ref:"upload",attrs:{type:"file",accept:"application/json"},on:{change:e.handleUpload}}),i("div",{staticClass:"button-group"},[i("div",{staticClass:"button",on:{click:e.openUpload}},[i("font-awesome-icon",{attrs:{icon:"file-upload"}}),e._v(" Upload JSON ")],1),i("div",{staticClass:"button",on:{click:e.promptURL}},[i("font-awesome-icon",{attrs:{icon:"link"}}),e._v(" Enter URL ")],1),i("div",{staticClass:"button",on:{click:function(t){e.isCustom=!1}}},[i("font-awesome-icon",{attrs:{icon:"undo"}}),e._v(" Back ")],1)])]):i("div",[i("h3",[e._v("Select an edition:")]),i("ul",{staticClass:"editions"},[e._l(e.editions,(function(t){return i("li",{key:t.id,staticClass:"edition",class:["edition-"+t.id],style:{backgroundImage:"url("+o("ce23")("./"+t.id+".png")+")"},on:{click:function(o){return e.setEdition(t)}}},[e._v(" "+e._s(t.name)+" ")])})),i("li",{staticClass:"edition edition-custom",style:{backgroundImage:"url("+o("441d")+")"},on:{click:function(t){e.isCustom=!0}}},[e._v(" Custom Script / Characters ")])],2)])]):e._e()},pe=[],ge=o("00c0"),ue={components:{Modal:O},data:function(){return{editions:ge,isCustom:!1,scripts:[["Deadly Penance Day","https://gist.githubusercontent.com/bra1n/0337cc44c6fd2c44f7589256ed5486d2/raw/16be38fa3c01aaf49827303ac80577bdb52c0b25/penanceday.json"],["Catfishing 11.1","https://gist.githubusercontent.com/bra1n/8a5ec41a7bbf945f6b7dfc1cef72b569/raw/a312ab93c2f302e0ef83c8b65a4e8e82760fda3a/catfishing.json"],["On Thin Ice (Teensyville)","https://gist.githubusercontent.com/bra1n/8dacd9f2abc6f428331ea1213ab153f5/raw/0cacbcaf8ed9bddae0cca25a9ada97e9958d868b/on-thin-ice.json"],["Race To The Bottom (Teensyville)","https://gist.githubusercontent.com/bra1n/63e1354cb3dc9d4032bcd0623dc48888/raw/5acb0eedcc0a67a64a99c7e0e6271de0b7b2e1b2/race-to-the-bottom.json"],["Frankenstein's Mayor by Ted (Teensyville)","https://gist.githubusercontent.com/bra1n/32c52b422cc01b934a4291eeb81dbcee/raw/5bf770693bbf7aff5e86601c82ca4af3222f4ba6/Frankensteins_Mayor_by_Ted.json"],["Vigormortis High School (Teensyville)","https://gist.githubusercontent.com/bra1n/1f65bd4a999524719d5dabe98c3c2d27/raw/22bbec6bf56a51a7459e5ae41ed47e41971c5445/VigormortisHighSchool.json"]]}},computed:Object(r["d"])(["modals"]),methods:{openUpload(){this.$refs.upload.click()},handleUpload(){const e=this.$refs.upload.files[0];if(e&&e.size){const t=new FileReader;t.addEventListener("load",()=>{try{const e=JSON.parse(t.result);this.parseRoles(e)}catch(e){alert("Error reading custom script: "+e.message)}this.$refs.upload.value=""}),t.readAsText(e)}},promptURL(){const e=prompt("Enter URL to a custom-script.json file");e&&this.handleURL(e)},async handleURL(e){const t=await fetch(e);if(t&&t.json)try{const e=await t.json();this.parseRoles(e)}catch(o){alert("Error loading custom script: "+o.message)}},parseRoles(e){if(!e||!e.length)return;const t=e.findIndex(({id:e})=>"_meta"===e);let o={};if(t>-1&&(o=e.splice(t,1).pop()),this.$store.commit("setCustomRoles",e),this.$store.commit("setEdition",Object.assign({},o,{id:"custom"})),e.some(({id:e})=>this.$store.state.fabled.has(e))){const t=[];e.forEach(({id:e})=>{this.$store.state.fabled.has(e)&&t.push(this.$store.state.fabled.get(e))}),this.$store.commit("players/setFabled",{fabled:t})}this.isCustom=!1},...Object(r["c"])(["toggleModal","setEdition"])}},fe=ue,be=(o("f299"),Object(f["a"])(fe,he,pe,!1,null,"9926f1f4",null)),ye=be.exports,ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"intro"},[o("img",{attrs:{src:"static/apple-icon.png",alt:""}}),e._v(" Welcome to the (unofficial) "),o("b",[e._v("Virtual Town Square and Grimoire")]),e._v(" for Blood on the Clocktower! Please add more players through the "),o("span",{staticClass:"button",on:{click:e.toggleMenu}},[o("font-awesome-icon",{attrs:{icon:"cog"}}),e._v(" Menu ")],1),e._v(" on the top right or by pressing "),o("b",[e._v("[A]")]),e._v(". You can also join a game session by pressing "),o("b",[e._v("[J]")]),e._v("."),o("br"),e._m(0)])},Ne=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"footer"},[e._v(" This project is free and open source and can be found on "),o("a",{attrs:{href:"https://github.com/bra1n/townsquare",target:"_blank"}},[e._v("GitHub")]),e._v('. It is not affiliated with The Pandemonium Institute. "Blood on the Clocktower" is a trademark of Steven Medway and The Pandemonium Institute. ')])}],ke={methods:Object(r["c"])(["toggleMenu"])},_e=ke,we=(o("c198"),Object(f["a"])(_e,ve,Ne,!1,null,"0ae0fea6",null)),Se=we.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.modals.reference&&e.roles.size?i("Modal",{staticClass:"characters",on:{close:function(t){return e.toggleModal("reference")}}},[i("font-awesome-icon",{staticClass:"toggle",attrs:{icon:"cloud-moon",title:"Show Night Order"},on:{click:function(t){return e.toggleModal("nightOrder")}}}),i("h3",[e._v(" Character Reference "),i("font-awesome-icon",{attrs:{icon:"address-card"}}),e._v(" "+e._s(e.edition.name||"Custom Script")+" ")],1),e._l(e.rolesGrouped,(function(t,s){return i("div",{key:s,class:["team",s]},[i("aside",[i("h4",[e._v(e._s(s))])]),i("ul",[e._l(t,(function(t){return i("li",{key:t.id,class:[s]},[t.id?i("span",{staticClass:"icon",style:{backgroundImage:"url("+(t.image&&e.grimoire.isImageOptIn?t.image:o("61b0")("./"+(t.imageAlt||t.id)+".png"))+")"}}):e._e(),i("div",{staticClass:"role"},[Object.keys(e.playersByRole).length?i("span",{staticClass:"player"},[e._v(e._s(e.playersByRole[t.id]?e.playersByRole[t.id].join(", "):""))]):e._e(),i("span",{staticClass:"name"},[e._v(e._s(t.name))]),i("span",{staticClass:"ability"},[e._v(e._s(t.ability))])])])})),i("li",{class:[s]}),i("li",{class:[s]})],2)])})),e.jinxed.length?i("div",{staticClass:"team jinxed"},[i("aside",[i("h4",[e._v("Jinxed")])]),i("ul",[e._l(e.jinxed,(function(t,s){return i("li",{key:s},[i("span",{staticClass:"icon",style:{backgroundImage:"url("+o("61b0")("./"+t.first.id+".png")+")"}}),i("span",{staticClass:"icon",style:{backgroundImage:"url("+o("61b0")("./"+t.second.id+".png")+")"}}),i("div",{staticClass:"role"},[i("span",{staticClass:"name"},[e._v(e._s(t.first.name)+" & "+e._s(t.second.name))]),i("span",{staticClass:"ability"},[e._v(e._s(t.reason))])])])})),i("li"),i("li")],2)]):e._e()],2):e._e()},xe=[],je={components:{Modal:O},computed:{jinxed:function(){const e=[];return this.roles.forEach(t=>{this.jinxes.get(t.id)&&this.jinxes.get(t.id).forEach((o,i)=>{this.roles.get(i)&&e.push({first:t,second:this.roles.get(i),reason:o})})}),e},rolesGrouped:function(){const e={};return this.roles.forEach(t=>{e[t.team]||(e[t.team]=[]),e[t.team].push(t)}),delete e["traveler"],e},playersByRole:function(){const e={};return this.players.forEach(({name:t,role:o})=>{o&&o.id&&"traveler"!==o.team&&(e[o.id]||(e[o.id]=[]),e[o.id].push(t))}),e},...Object(r["d"])(["roles","modals","edition","grimoire","jinxes"]),...Object(r["d"])("players",["players"])},methods:{...Object(r["c"])(["toggleModal"])}},Me=je,Ie=(o("4c96"),Object(f["a"])(Me,Re,xe,!1,null,"7d0ee60b",null)),Oe=Ie.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"vote"}},[i("div",{staticClass:"arrows"},[i("span",{staticClass:"nominee",style:e.nomineeStyle}),i("span",{staticClass:"nominator",style:e.nominatorStyle})]),i("div",{staticClass:"overlay"},[i("audio",{attrs:{src:o("f6a8"),preload:"auto"}}),i("em",{staticClass:"blue"},[e._v(e._s(e.nominator.name))]),e._v(" nominated "),i("em",[e._v(e._s(e.nominee.name))]),e._v("! "),i("br"),i("em",{staticClass:"blue"},[e._v(" "+e._s(e.voters.length)+" vote"+e._s(1!==e.voters.length?"s":"")+" ")]),e._v(" in favor "),"traveler"!==e.nominee.role.team?i("em",[e._v(" (majority is "+e._s(Math.ceil(e.alive/2))+") ")]):i("em",[e._v("(majority is "+e._s(Math.ceil(e.players.length/2))+")")]),e.session.isSpectator?e.canVote?[e.session.isVoteInProgress?e._e():i("div",[e._v(" "+e._s(e.session.votingSpeed/1e3)+" seconds between votes ")]),i("div",{staticClass:"button-group"},[i("div",{staticClass:"button townsfolk",class:{disabled:!e.currentVote},on:{click:function(t){return e.vote(!1)}}},[e._v(" Hand DOWN ")]),i("div",{staticClass:"button demon",class:{disabled:e.currentVote},on:{click:function(t){return e.vote(!0)}}},[e._v(" Hand UP ")])])]:e.player?e._e():i("div",[e._v(" Please claim a seat to vote. ")]):[!e.session.isVoteInProgress&&e.session.lockedVote<1?i("div",[e._v(" Time per player: "),i("font-awesome-icon",{attrs:{icon:"minus-circle"},on:{mousedown:function(t){return t.preventDefault(),e.setVotingSpeed(-500)}}}),e._v(" "+e._s(e.session.votingSpeed/1e3)+"s "),i("font-awesome-icon",{attrs:{icon:"plus-circle"},on:{mousedown:function(t){return t.preventDefault(),e.setVotingSpeed(500)}}})],1):e._e(),i("div",{staticClass:"button-group"},[e.session.isVoteInProgress?e._e():i("div",{staticClass:"button townsfolk",on:{click:e.countdown}},[e._v(" Countdown ")]),e.session.isVoteInProgress?[i("div",{staticClass:"button townsfolk",class:{disabled:!e.session.lockedVote},on:{click:e.pause}},[e._v(" "+e._s(e.voteTimer?"Pause":"Resume")+" ")]),i("div",{staticClass:"button",on:{click:e.stop}},[e._v("Reset")])]:i("div",{staticClass:"button",on:{click:e.start}},[e._v(" "+e._s(e.session.lockedVote?"Restart":"Start")+" ")]),i("div",{staticClass:"button demon",on:{click:e.finish}},[e._v("Close")])],2),"traveler"!==e.nominee.role.team?i("div",{staticClass:"button-group mark"},[i("div",{staticClass:"button",class:{disabled:e.session.nomination[1]===e.session.markedPlayer},on:{click:e.setMarked}},[e._v(" Mark for execution ")]),i("div",{staticClass:"button",on:{click:e.removeMarked}},[e._v(" Clear mark ")])]):e._e()]],2),i("transition",{attrs:{name:"blur"}},[e.session.isVoteInProgress&&!e.session.lockedVote?i("div",{staticClass:"countdown"},[i("span",[e._v("3")]),i("span",[e._v("2")]),i("span",[e._v("1")]),i("span",[e._v("GO")]),i("audio",{attrs:{autoplay:!e.grimoire.isMuted,src:o("f6a8"),muted:e.grimoire.isMuted}})]):e._e()])],1)},Pe=[],Te={computed:{...Object(r["d"])("players",["players"]),...Object(r["d"])(["session","grimoire"]),...Object(r["b"])({alive:"players/alive"}),nominator:function(){return this.players[this.session.nomination[0]]},nominatorStyle:function(){const e=this.players.length,t=this.session.nomination[0];return{transform:`rotate(${Math.round(t/e*360)}deg)`,transitionDuration:this.session.votingSpeed-100+"ms"}},nominee:function(){return this.players[this.session.nomination[1]]},nomineeStyle:function(){const e=this.players.length,t=this.session.nomination[1],o=this.session.lockedVote,i=360*(t+Math.min(o,e))/e;return{transform:`rotate(${Math.round(i)}deg)`,transitionDuration:this.session.votingSpeed-100+"ms"}},player:function(){return this.players.find(e=>e.id===this.session.playerId)},currentVote:function(){const e=this.players.findIndex(e=>e.id===this.session.playerId);return e>=0?!!this.session.votes[e]:void 0},canVote:function(){if(!this.player)return!1;if(this.player.isVoteless&&"traveler"!==this.nominee.role.team)return!1;const e=this.session,t=this.players.length,o=this.players.indexOf(this.player),i=(o-1+t-e.nomination[1])%t;return i>=e.lockedVote-1},voters:function(){const e=this.session.nomination[1],t=Array(this.players.length).fill("").map((e,t)=>this.session.votes[t]?this.players[t].name:""),o=[...t.slice(e+1),...t.slice(0,e+1)];return(this.session.lockedVote?o.slice(0,this.session.lockedVote-1):o).filter(e=>!!e)}},data(){return{voteTimer:null}},methods:{countdown(){this.$store.commit("session/lockVote",0),this.$store.commit("session/setVoteInProgress",!0),this.voteTimer=setInterval(()=>{this.start()},4e3)},start(){this.$store.commit("session/lockVote",1),this.$store.commit("session/setVoteInProgress",!0),clearInterval(this.voteTimer),this.voteTimer=setInterval(()=>{this.$store.commit("session/lockVote"),this.session.lockedVote>this.players.length&&(clearInterval(this.voteTimer),this.$store.commit("session/setVoteInProgress",!1))},this.session.votingSpeed)},pause(){this.voteTimer?(clearInterval(this.voteTimer),this.voteTimer=null):this.voteTimer=setInterval(()=>{this.$store.commit("session/lockVote"),this.session.lockedVote>this.players.length&&(clearInterval(this.voteTimer),this.$store.commit("session/setVoteInProgress",!1))},this.session.votingSpeed)},stop(){clearInterval(this.voteTimer),this.voteTimer=null,this.$store.commit("session/setVoteInProgress",!1),this.$store.commit("session/lockVote",0)},finish(){clearInterval(this.voteTimer),this.$store.commit("session/addHistory",this.players),this.$store.commit("session/nomination")},vote(e){if(!this.canVote)return!1;const t=this.players.findIndex(e=>e.id===this.session.playerId);t>=0&&!!this.session.votes[t]!==e&&this.$store.commit("session/voteSync",[t,e])},setVotingSpeed(e){const t=Math.round(this.session.votingSpeed+e);t>0&&this.$store.commit("session/setVotingSpeed",t)},setMarked(){this.$store.commit("session/setMarkedPlayer",this.session.nomination[1])},removeMarked(){this.$store.commit("session/setMarkedPlayer",-1)}}},De=Te,Ve=(o("8e72"),Object(f["a"])(De,Ce,Pe,!1,null,"56f82741",null)),Ee=Ve.exports,qe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"gradients"}},e._l(e.gradients,(function(e,t){return o("svg",{key:t,attrs:{width:"0",height:"0"}},[o("linearGradient",{attrs:{id:e[0],x1:"50%",y1:"100%",x2:"50%",y2:"0%"}},[o("stop",{style:{"stop-color":e[2],"stop-opacity":1},attrs:{offset:"0%"}}),o("stop",{style:{"stop-color":e[1],"stop-opacity":1},attrs:{offset:"100%"}})],1)],1)})),0)},Ae=[],$e={data(){return{gradients:[["demon","#ce0100","#000"],["townsfolk","#1f65ff","#000"],["default","#4E4E4E","#000"]]}}},Fe=$e,ze=(o("3f8f"),Object(f["a"])(Fe,qe,Ae,!1,null,"1e202a64",null)),Le=ze.exports,Ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.modals.nightOrder&&e.roles.size?i("Modal",{staticClass:"night-reference",on:{close:function(t){return e.toggleModal("nightOrder")}}},[i("font-awesome-icon",{staticClass:"toggle",attrs:{icon:"address-card",title:"Show Character Reference"},on:{click:function(t){return e.toggleModal("reference")}}}),i("h3",[e._v(" Night Order "),i("font-awesome-icon",{attrs:{icon:"cloud-moon"}}),e._v(" "+e._s(e.edition.name||"Custom Script")+" ")],1),i("div",{staticClass:"night"},[i("ul",{staticClass:"first"},[i("li",{staticClass:"headline"},[e._v("First Night")]),e._l(e.rolesFirstNight,(function(t){return i("li",{key:t.name,class:[t.team]},[i("span",{staticClass:"name"},[e._v(" "+e._s(t.name)+" "),t.players.length?i("span",{staticClass:"player"},[i("br"),e._l(t.players,(function(o,s){return i("small",{key:s,class:{dead:o.isDead}},[e._v(e._s(o.name+(t.players.length>s+1?",":"")))])}))],2):e._e()]),t.id?i("span",{staticClass:"icon",style:{backgroundImage:"url("+(t.image&&e.grimoire.isImageOptIn?t.image:o("61b0")("./"+(t.imageAlt||t.id)+".png"))+")"}}):e._e(),t.firstNightReminder?i("span",{staticClass:"reminder"},[e._v(" "+e._s(t.firstNightReminder)+" ")]):e._e()])}))],2),i("ul",{staticClass:"other"},[i("li",{staticClass:"headline"},[e._v("Other Nights")]),e._l(e.rolesOtherNight,(function(t){return i("li",{key:t.name,class:[t.team]},[t.id?i("span",{staticClass:"icon",style:{backgroundImage:"url("+(t.image&&e.grimoire.isImageOptIn?t.image:o("61b0")("./"+(t.imageAlt||t.id)+".png"))+")"}}):e._e(),i("span",{staticClass:"name"},[e._v(" "+e._s(t.name)+" "),t.players.length?i("span",{staticClass:"player"},[i("br"),e._l(t.players,(function(o,s){return i("small",{key:s,class:{dead:o.isDead}},[e._v(e._s(o.name+(t.players.length>s+1?",":"")))])}))],2):e._e()]),t.otherNightReminder?i("span",{staticClass:"reminder"},[e._v(" "+e._s(t.otherNightReminder)+" ")]):e._e()])}))],2)])],1):e._e()},He=[],Be={components:{Modal:O},computed:{rolesFirstNight:function(){const e=[];return this.players.length>6&&e.push({id:"evil",name:"Minion info",firstNight:5,team:"minion",players:this.players.filter(e=>"minion"===e.role.team),firstNightReminder:" If more than one Minion, they all make eye contact with each other.  Show the This is the Demon card. Point to the Demon."},{id:"evil",name:"Demon info & bluffs",firstNight:8,team:"demon",players:this.players.filter(e=>"demon"===e.role.team),firstNightReminder:" Show the These are your minions card. Point to each Minion.  Show the These characters are not in play card. Show 3 character tokens of good characters not in play."}),this.roles.forEach(t=>{const o=this.players.filter(e=>e.role.id===t.id);t.firstNight&&("traveler"!==t.team||o.length)&&e.push(Object.assign({players:o},t))}),this.fabled.filter(({firstNight:e})=>e).forEach(t=>{e.push(Object.assign({players:[]},t))}),e.sort((e,t)=>e.firstNight-t.firstNight),e},rolesOtherNight:function(){const e=[];return this.roles.forEach(t=>{const o=this.players.filter(e=>e.role.id===t.id);t.otherNight&&("traveler"!==t.team||o.length)&&e.push(Object.assign({players:o},t))}),this.fabled.filter(({otherNight:e})=>e).forEach(t=>{e.push(Object.assign({players:[]},t))}),e.sort((e,t)=>e.otherNight-t.otherNight),e},...Object(r["d"])(["roles","modals","edition","grimoire"]),...Object(r["d"])("players",["players","fabled"])},methods:{...Object(r["c"])(["toggleModal"])}},Ue=Be,Je=(o("b6d8"),Object(f["a"])(Ue,Ge,He,!1,null,"ec47598c",null)),We=Je.exports,Ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.modals.fabled&&e.fabled.length?o("Modal",{on:{close:function(t){return e.toggleModal("fabled")}}},[o("h3",[e._v(" Choose a fabled character to add to the game ")]),o("ul",{staticClass:"tokens"},e._l(e.fabled,(function(t){return o("li",{key:t.id,on:{click:function(o){return e.setFabled(t)}}},[o("Token",{attrs:{role:t}})],1)})),0)]):e._e()},Ke=[],Ze={components:{Token:y,Modal:O},computed:{...Object(r["d"])(["modals","fabled","grimoire"]),fabled(){const e=[];return this.$store.state.fabled.forEach(t=>{this.$store.state.players.fabled.some(e=>e.id===t.id)||e.push(t)}),e}},methods:{setFabled(e){this.$store.commit("players/setFabled",{fabled:e}),this.$store.commit("toggleModal","fabled")},...Object(r["c"])(["toggleModal"])}},Qe=Ze,Xe=(o("ff40"),Object(f["a"])(Qe,Ye,Ke,!1,null,"d6b399a0",null)),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return!e.modals.voteHistory||!e.session.voteHistory&&e.session.isSpectator?e._e():o("Modal",{staticClass:"vote-history",on:{close:function(t){return e.toggleModal("voteHistory")}}},[e.session.isSpectator?o("font-awesome-icon",{staticClass:"clear",attrs:{icon:"trash-alt",title:"Clear vote history"},on:{click:e.clearVoteHistory}}):e._e(),o("h3",[e._v("Vote history")]),e.session.isSpectator?e._e():[o("div",{staticClass:"options"},[o("div",{staticClass:"option",on:{click:e.setRecordVoteHistory}},[o("font-awesome-icon",{attrs:{icon:["fas",e.session.isVoteHistoryAllowed?"check-square":"square"]}}),e._v(" Accessible to players ")],1),o("div",{staticClass:"option",on:{click:e.clearVoteHistory}},[o("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e._v(" Clear for everyone ")],1)])],o("table",[o("thead",[o("tr",[o("td",[e._v("Time")]),o("td",[e._v("Nominator")]),o("td",[e._v("Nominee")]),o("td",[e._v("Type")]),o("td",[e._v("Votes")]),o("td",[e._v("Majority")]),o("td",[o("font-awesome-icon",{attrs:{icon:"user-friends"}}),e._v(" Voters ")],1)])]),o("tbody",e._l(e.session.voteHistory,(function(t,i){return o("tr",{key:i},[o("td",[e._v(" "+e._s(t.timestamp.getHours().toString().padStart(2,"0"))+":"+e._s(t.timestamp.getMinutes().toString().padStart(2,"0"))+" ")]),o("td",[e._v(e._s(t.nominator))]),o("td",[e._v(e._s(t.nominee))]),o("td",[e._v(e._s(t.type))]),o("td",[e._v(" "+e._s(t.votes.length)+" "),o("font-awesome-icon",{attrs:{icon:"hand-paper"}})],1),o("td",[e._v(" "+e._s(t.majority)+" "),o("font-awesome-icon",{attrs:{icon:["fas",t.votes.length>=t.majority?"check-square":"square"]}})],1),o("td",[e._v(" "+e._s(t.votes.join(", "))+" ")])])})),0)])],2)},ot=[],it={components:{Modal:O},computed:{...Object(r["d"])(["session","modals"])},methods:{clearVoteHistory(){this.$store.commit("session/clearVoteHistory")},setRecordVoteHistory(){this.$store.commit("session/setVoteHistoryAllowed",!this.session.isVoteHistoryAllowed)},...Object(r["c"])(["toggleModal"])}},st=it,at=(o("8e93"),Object(f["a"])(st,tt,ot,!1,null,"482a37a8",null)),rt=at.exports,nt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.modals.gameState?o("Modal",{staticClass:"game-state",on:{close:function(t){return e.toggleModal("gameState")}}},[o("h3",[e._v("Current Game State")]),o("textarea",{domProps:{value:e.gamestate},on:{input:function(t){t.stopPropagation(),e.input=t.target.value},click:function(e){return e.target.select()},keyup:function(e){e.stopPropagation()}}}),o("div",{staticClass:"button-group"},[o("div",{staticClass:"button townsfolk",on:{click:e.copy}},[o("font-awesome-icon",{attrs:{icon:"copy"}}),e._v(" Copy JSON ")],1),e.session.isSpectator?e._e():o("div",{staticClass:"button demon",on:{click:e.load}},[o("font-awesome-icon",{attrs:{icon:"cog"}}),e._v(" Load State ")],1)])]):e._e()},lt=[],dt={components:{Modal:O},computed:{gamestate:function(){return JSON.stringify({bluffs:this.players.bluffs.map(({id:e})=>e),edition:this.edition.isOfficial?{id:this.edition.id}:this.edition,roles:this.edition.isOfficial?"":this.$store.getters.customRolesStripped,fabled:this.players.fabled.map(({id:e})=>e),players:this.players.players.map(e=>({...e,role:e.role.id||{}}))})},...Object(r["d"])(["modals","players","edition","roles","session"])},data(){return{input:""}},methods:{copy:function(){navigator.clipboard.writeText(this.input||this.gamestate)},load:function(){if(!this.session.isSpectator)try{const e=JSON.parse(this.input||this.gamestate),{bluffs:t,edition:o,roles:i,fabled:s,players:a}=e;i&&this.$store.commit("setCustomRoles",i),o&&this.$store.commit("setEdition",o),t.length&&t.forEach((e,t)=>{this.$store.commit("players/setBluff",{index:t,role:this.$store.state.roles.get(e)||{}})}),s&&this.$store.commit("players/setFabled",{fabled:s.map(e=>this.$store.state.fabled.get(e))}),a&&this.$store.commit("players/set",a.map(e=>({...e,role:this.$store.state.roles.get(e.role)||this.$store.getters.rolesJSONbyId.get(e.role)||{}}))),this.toggleModal("gameState")}catch(e){alert("Unable to parse JSON: "+e)}},...Object(r["c"])(["toggleModal"])}},ct=dt,mt=(o("9538"),Object(f["a"])(ct,nt,lt,!1,null,"c5d58668",null)),ht=mt.exports,pt={components:{GameStateModal:ht,VoteHistoryModal:rt,FabledModal:et,NightOrderModal:We,Vote:Ee,ReferenceModal:Oe,Intro:Se,TownInfo:Q,TownSquare:B,Menu:se,EditionModal:ye,RolesModal:me,Gradients:Le},computed:{...Object(r["d"])(["grimoire","session"]),...Object(r["d"])("players",["players"])},data(){return{version:n["a"]}},methods:{keyup({key:e,ctrlKey:t,metaKey:o}){if(!t&&!o)switch(e.toLocaleLowerCase()){case"g":this.$store.commit("toggleGrimoire");break;case"a":this.$refs.menu.addPlayer();break;case"h":this.$refs.menu.hostSession();break;case"j":this.$refs.menu.joinSession();break;case"r":this.$store.commit("toggleModal","reference");break;case"n":this.$store.commit("toggleModal","nightOrder");break;case"e":if(this.session.isSpectator)return;this.$store.commit("toggleModal","edition");break;case"c":if(this.session.isSpectator)return;this.$store.commit("toggleModal","roles");break;case"v":!this.session.voteHistory.length&&this.session.isSpectator||this.$store.commit("toggleModal","voteHistory");break;case"s":if(this.session.isSpectator)return;this.$refs.menu.toggleNight();break;case"escape":this.$store.commit("toggleModal")}}}},gt=pt,ut=(o("5c0b"),Object(f["a"])(gt,s,a,!1,null,null,null)),ft=ut.exports,bt=o("dfb1"),yt=o.n(bt);class vt{constructor(e){this._wss="wss://live.clocktower.online:8080/",this._socket=null,this._isSpectator=!0,this._gamestate=[],this._store=e,this._pingInterval=3e4,this._pingTimer=null,this._reconnectTimer=null,this._players={},this._pings={},this._store.state.session.sessionId&&this.connect(this._store.state.session.sessionId)}_open(e){this.disconnect(),this._socket=new WebSocket(this._wss+e+"/"+(this._isSpectator?this._store.state.session.playerId:"host")),this._socket.addEventListener("message",this._handleMessage.bind(this)),this._socket.onopen=this._onOpen.bind(this),this._socket.onclose=t=>{this._socket=null,clearInterval(this._pingTimer),this._pingTimer=null,1e3!==t.code?(this._store.commit("session/setReconnecting",!0),this._reconnectTimer=setTimeout(()=>this.connect(e),3e3)):(this._store.commit("session/setSessionId",""),t.reason&&alert(t.reason))}}_send(e,t){this._socket&&1===this._socket.readyState&&this._socket.send(JSON.stringify([e,t]))}_sendDirect(e,t,o){e?this._send("direct",{[e]:[t,o]}):this._send(t,o)}_onOpen(){this._isSpectator?this._sendDirect("host","getGamestate",this._store.state.session.playerId):this.sendGamestate(),this._ping()}_ping(){this._handlePing(),this._send("ping",[this._isSpectator?this._store.state.session.playerId:Object.keys(this._players).length,"latency"]),clearTimeout(this._pingTimer),this._pingTimer=setTimeout(this._ping.bind(this),this._pingInterval)}_handleMessage({data:e}){let t,o;try{[t,o]=JSON.parse(e)}catch(i){console.log("unsupported socket message",e)}switch(t){case"getGamestate":this.sendGamestate(o);break;case"edition":this._updateEdition(o);break;case"fabled":this._updateFabled(o);break;case"gs":this._updateGamestate(o);break;case"player":this._updatePlayer(o);break;case"claim":this._updateSeat(o);break;case"ping":this._handlePing(o);break;case"nomination":if(!this._isSpectator)return;o||this._store.commit("session/addHistory",this._store.state.players.players),this._store.commit("session/nomination",{nomination:o});break;case"swap":if(!this._isSpectator)return;this._store.commit("players/swap",o);break;case"move":if(!this._isSpectator)return;this._store.commit("players/move",o);break;case"remove":if(!this._isSpectator)return;this._store.commit("players/remove",o);break;case"marked":if(!this._isSpectator)return;this._store.commit("session/setMarkedPlayer",o);break;case"isNight":if(!this._isSpectator)return;this._store.commit("toggleNight",o);break;case"isVoteHistoryAllowed":if(!this._isSpectator)return;this._store.commit("session/setVoteHistoryAllowed",o),this._store.commit("session/clearVoteHistory");break;case"votingSpeed":if(!this._isSpectator)return;this._store.commit("session/setVotingSpeed",o);break;case"clearVoteHistory":if(!this._isSpectator)return;this._store.commit("session/clearVoteHistory");break;case"isVoteInProgress":if(!this._isSpectator)return;this._store.commit("session/setVoteInProgress",o);break;case"vote":this._handleVote(o);break;case"lock":this._handleLock(o);break;case"bye":this._handleBye(o);break;case"pronouns":this._updatePlayerPronouns(o);break}}connect(e){this._store.state.session.playerId||this._store.commit("session/setPlayerId",Math.random().toString(36).substr(2)),this._pings={},this._store.commit("session/setPlayerCount",0),this._store.commit("session/setPing",0),this._isSpectator=this._store.state.session.isSpectator,this._open(e)}disconnect(){this._pings={},this._store.commit("session/setPlayerCount",0),this._store.commit("session/setPing",0),this._store.commit("session/setReconnecting",!1),clearTimeout(this._reconnectTimer),this._socket&&(this._isSpectator&&this._sendDirect("host","bye",this._store.state.session.playerId),this._socket.close(1e3),this._socket=null)}sendGamestate(e="",t=!1){if(!this._isSpectator)if(this._gamestate=this._store.state.players.players.map(e=>({name:e.name,id:e.id,isDead:e.isDead,isVoteless:e.isVoteless,pronouns:e.pronouns,...e.role&&"traveler"===e.role.team?{roleId:e.role.id}:{}})),t)this._sendDirect(e,"gs",{gamestate:this._gamestate,isLightweight:t});else{const{session:t,grimoire:o}=this._store.state,{fabled:i}=this._store.state.players;this.sendEdition(e),this._sendDirect(e,"gs",{gamestate:this._gamestate,isNight:o.isNight,isVoteHistoryAllowed:t.isVoteHistoryAllowed,nomination:t.nomination,votingSpeed:t.votingSpeed,lockedVote:t.lockedVote,isVoteInProgress:t.isVoteInProgress,markedPlayer:t.markedPlayer,fabled:i.map(e=>e.isCustom?e:{id:e.id}),...t.nomination?{votes:t.votes}:{}})}}_updateGamestate(e){if(!this._isSpectator)return;const{gamestate:t,isLightweight:o,isNight:i,isVoteHistoryAllowed:s,nomination:a,votingSpeed:r,votes:n,lockedVote:l,isVoteInProgress:d,markedPlayer:c,fabled:m}=e,h=this._store.state.players.players;if(h.length<t.length)for(let p=h.length;p<t.length;p++)this._store.commit("players/add",t[p].name);else if(h.length>t.length)for(let p=h.length;p>t.length;p--)this._store.commit("players/remove",p-1);t.forEach((e,t)=>{const o=h[t],{roleId:i}=e;if(["name","id","isDead","isVoteless","pronouns"].forEach(t=>{const i=e[t];o[t]!==i&&this._store.commit("players/update",{player:o,property:t,value:i})}),i&&o.role.id!==i){const e=this._store.state.roles.get(i)||this._store.getters.rolesJSONbyId.get(i);e&&this._store.commit("players/update",{player:o,property:"role",value:e})}else i||"traveler"!==o.role.team||this._store.commit("players/update",{player:o,property:"role",value:{}})}),o||(this._store.commit("toggleNight",!!i),this._store.commit("session/setVoteHistoryAllowed",s),this._store.commit("session/nomination",{nomination:a,votes:n,votingSpeed:r,lockedVote:l,isVoteInProgress:d}),this._store.commit("session/setMarkedPlayer",c),this._store.commit("players/setFabled",{fabled:m.map(e=>this._store.state.fabled.get(e.id)||e)}))}sendEdition(e=""){if(this._isSpectator)return;const{edition:t}=this._store.state;let o;t.isOfficial||(o=this._store.getters.customRolesStripped),this._sendDirect(e,"edition",{edition:t.isOfficial?{id:t.id}:t,...o?{roles:o}:{}})}_updateEdition({edition:e,roles:t}){if(this._isSpectator&&(this._store.commit("setEdition",e),t&&(this._store.commit("setCustomRoles",t),this._store.state.roles.size!==t.length))){const e=[];t.forEach(({id:t})=>{this._store.state.roles.get(t)||e.push(t)}),alert("This session contains custom characters that can't be found. Please load them before joining! Missing roles: "+e.join(", ")),this.disconnect(),this._store.commit("toggleModal","edition")}}sendFabled(){if(this._isSpectator)return;const{fabled:e}=this._store.state.players;this._send("fabled",e.map(e=>e.isCustom?e:{id:e.id}))}_updateFabled(e){this._isSpectator&&this._store.commit("players/setFabled",{fabled:e.map(e=>this._store.state.fabled.get(e.id)||e)})}sendPlayer({player:e,property:t,value:o}){if(this._isSpectator||"reminders"===t)return;const i=this._store.state.players.players.indexOf(e);"role"===t?o.team&&"traveler"===o.team?(this._gamestate[i].roleId=o.id,this._send("player",{index:i,property:t,value:o.id})):this._gamestate[i].roleId&&(delete this._gamestate[i].roleId,this._send("player",{index:i,property:t,value:""})):this._send("player",{index:i,property:t,value:o})}_updatePlayer({index:e,property:t,value:o}){if(!this._isSpectator)return;const i=this._store.state.players.players[e];if(i)if("role"===t)if(o||"traveler"!==i.role.team){const e=this._store.state.roles.get(o)||this._store.getters.rolesJSONbyId.get(o)||{};this._store.commit("players/update",{player:i,property:"role",value:e})}else this._store.commit("players/update",{player:i,property:"role",value:{}});else this._store.commit("players/update",{player:i,property:t,value:o})}sendPlayerPronouns({player:e,value:t,isFromSockets:o}){if(o||this._isSpectator&&this._store.state.session.playerId!==e.id)return;const i=this._store.state.players.players.indexOf(e);this._send("pronouns",[i,t])}_updatePlayerPronouns([e,t]){const o=this._store.state.players.players[e];this._store.commit("players/update",{player:o,property:"pronouns",value:t,isFromSockets:!0})}_handlePing([e=0,t]=[]){const o=(new Date).getTime();if(this._isSpectator)t&&this._store.commit("session/setPing",parseInt(t,10));else{for(let e in this._players)o-this._players[e]>2*this._pingInterval&&(delete this._players[e],delete this._pings[e]);if(this._store.state.players.players.forEach(e=>{e.id&&!this._players[e.id]&&this._store.commit("players/update",{player:e,property:"id",value:""})}),e){this._players[e]=o;const i=parseInt(t,10);if(i&&i>0&&i<3e4){this._pings[e]=i;const t=Object.values(this._pings);this._store.commit("session/setPing",Math.round(t.reduce((e,t)=>e+t,0)/t.length))}}}this._isSpectator&&!e||this._store.commit("session/setPlayerCount",this._isSpectator?e:Object.keys(this._players).length)}_handleBye(e){this._isSpectator||(delete this._players[e],this._store.commit("session/setPlayerCount",Object.keys(this._players).length))}claimSeat(e){if(!this._isSpectator)return;const t=this._store.state.players.players;t.length>e&&(e<0||!t[e].id)&&this._send("claim",[e,this._store.state.session.playerId])}_updateSeat([e,t]){if(this._isSpectator)return;const o="id",i=this._store.state.players.players,s=i.findIndex(({id:e})=>e===t);if(s>=0&&s!==e&&this._store.commit("players/update",{player:i[s],property:o,value:""}),e>=0){const s=i[e];if(!s)return;this._store.commit("players/update",{player:s,property:o,value:t})}this._handlePing([!0,t,0])}distributeRoles(){if(this._isSpectator)return;const e={};this._store.state.players.players.forEach((t,o)=>{t.id&&t.role&&(e[t.id]=["player",{index:o,property:"role",value:t.role.id}])}),Object.keys(e).length&&this._send("direct",e)}nomination(e){if(this._isSpectator)return;const t=e&&e.nomination||e,o=this._store.state.players.players;(!t||o.length>t[0]&&o.length>t[1])&&(this.setVotingSpeed(this._store.state.session.votingSpeed),this._send("nomination",t))}setVoteInProgress(){this._isSpectator||this._send("isVoteInProgress",this._store.state.session.isVoteInProgress)}setIsNight(){this._isSpectator||this._send("isNight",this._store.state.grimoire.isNight)}setVoteHistoryAllowed(){this._isSpectator||this._send("isVoteHistoryAllowed",this._store.state.session.isVoteHistoryAllowed)}setVotingSpeed(e){this._isSpectator||e&&this._send("votingSpeed",e)}setMarked(e){this._isSpectator||this._send("marked",e)}clearVoteHistory(){this._isSpectator||this._send("clearVoteHistory")}vote([e]){const t=this._store.state.players.players[e];this._store.state.session.playerId!==t.id&&this._isSpectator||this._send("vote",[e,this._store.state.session.votes[e],!this._isSpectator])}_handleVote([e,t,o]){const{session:i,players:s}=this._store.state,a=s.players.length,r=(e-1+a-i.nomination[1])%a;(o||r>=i.lockedVote-1)&&this._store.commit("session/vote",[e,t])}lockVote(){if(this._isSpectator)return;const{lockedVote:e,votes:t,nomination:o}=this._store.state.session,{players:i}=this._store.state.players,s=(o[1]+e-1)%i.length;this._send("lock",[this._store.state.session.lockedVote,t[s]])}_handleLock([e,t]){if(this._isSpectator&&(this._store.commit("session/lockVote",e),e>1)){const{lockedVote:e,nomination:o}=this._store.state.session,{players:i}=this._store.state.players,s=(o[1]+e-1)%i.length;this._store.state.session.votes[s]!==t&&this._store.commit("session/vote",[s,t])}}swapPlayer(e){this._isSpectator||this._send("swap",e)}movePlayer(e){this._isSpectator||this._send("move",e)}removePlayer(e){this._isSpectator||this._send("remove",e)}}var Nt=e=>{const t=new vt(e);e.subscribe(({type:e,payload:o},i)=>{switch(e){case"session/setSessionId":i.session.sessionId?t.connect(i.session.sessionId):(window.location.hash="",t.disconnect());break;case"session/claimSeat":t.claimSeat(o);break;case"session/distributeRoles":o&&t.distributeRoles();break;case"session/nomination":case"session/setNomination":t.nomination(o);break;case"session/setVoteInProgress":t.setVoteInProgress(o);break;case"session/voteSync":t.vote(o);break;case"session/lockVote":t.lockVote();break;case"session/setVotingSpeed":t.setVotingSpeed(o);break;case"session/clearVoteHistory":t.clearVoteHistory();break;case"session/setVoteHistoryAllowed":t.setVoteHistoryAllowed();break;case"toggleNight":t.setIsNight();break;case"setEdition":t.sendEdition();break;case"players/setFabled":t.sendFabled();break;case"session/setMarkedPlayer":t.setMarked(o);break;case"players/swap":t.swapPlayer(o);break;case"players/move":t.movePlayer(o);break;case"players/remove":t.removePlayer(o);break;case"players/set":case"players/clear":case"players/add":t.sendGamestate("",!0);break;case"players/update":"pronouns"===o.property?t.sendPlayerPronouns(o):t.sendPlayer(o);break}});const o=window.location.hash.substr(1);o&&(e.commit("session/setSpectator",!0),e.commit("session/setSessionId",o),e.commit("toggleGrimoire",!1))};const kt={name:"",id:"",role:{},reminders:[],isVoteless:!1,isDead:!1,pronouns:""},_t=()=>({players:[],fabled:[],bluffs:[]}),wt={alive({players:e}){return e.filter(e=>!e.isDead).length},nonTravelers({players:e}){const t=e.filter(e=>"traveler"!==e.role.team);return Math.min(t.length,15)},nightOrder({players:e,fabled:t}){const o=[0],i=[0];e.forEach(({role:e})=>{e.firstNight&&!o.includes(e.firstNight)&&o.push(e.firstNight),e.otherNight&&!i.includes(e.otherNight)&&i.push(e.otherNight)}),t.forEach(e=>{e.firstNight&&!o.includes(e.firstNight)&&o.push(e.firstNight),e.otherNight&&!i.includes(e.otherNight)&&i.push(e.otherNight)}),o.sort((e,t)=>e-t),i.sort((e,t)=>e-t);const s=new Map;return e.forEach(e=>{const t=Math.max(o.indexOf(e.role.firstNight),0),a=Math.max(i.indexOf(e.role.otherNight),0);s.set(e,{first:t,other:a})}),t.forEach(e=>{const t=Math.max(o.indexOf(e.firstNight),0),a=Math.max(i.indexOf(e.otherNight),0);s.set(e,{first:t,other:a})}),s}},St={randomize({state:e,commit:t}){const o=e.players.map(e=>[Math.random(),e]).sort((e,t)=>e[0]-t[0]).map(e=>e[1]);t("set",o)},clearRoles({state:e,commit:t,rootState:o}){let i;o.session.isSpectator?i=e.players.map(e=>("traveler"!==e.role.team&&(e.role={}),e.reminders=[],e)):(i=e.players.map(({name:e,id:t,pronouns:o})=>({...kt,name:e,id:t,pronouns:o})),t("setFabled",{fabled:[]})),t("set",i),t("setBluff")}},Rt={clear(e){e.players=[],e.bluffs=[],e.fabled=[]},set(e,t=[]){e.players=t},update(e,{player:t,property:o,value:i}){const s=e.players.indexOf(t);s>=0&&(e.players[s][o]=i)},add(e,t){e.players.push({...kt,name:t})},remove(e,t){e.players.splice(t,1)},swap(e,[t,o]){[e.players[t],e.players[o]]=[e.players[o],e.players[t]],e.players.splice(0,0)},move(e,[t,o]){e.players.splice(o,0,e.players.splice(t,1)[0])},setBluff(e,{index:t,role:o}={}){void 0!==t?e.bluffs.splice(t,1,o):e.bluffs=[]},setFabled(e,{index:t,fabled:o}={}){void 0!==t?e.fabled.splice(t,1):o&&(Array.isArray(o)?e.fabled=o:e.fabled.push(o))}};var xt={namespaced:!0,state:_t,getters:wt,actions:St,mutations:Rt};const jt=(e,[t,o])=>{e.nomination&&(e.votes=[...e.votes],e.votes[t]=void 0===o?!e.votes[t]:o)},Mt=()=>({sessionId:"",isSpectator:!1,isReconnecting:!1,playerCount:0,ping:0,playerId:"",claimedSeat:-1,nomination:!1,votes:[],lockedVote:0,votingSpeed:3e3,isVoteInProgress:!1,voteHistory:[],markedPlayer:-1,isVoteHistoryAllowed:!0,isRolesDistributed:!1}),It={},Ot={},Ct=e=>(t,o)=>{t[e]=o},Pt={setPlayerId:Ct("playerId"),setSpectator:Ct("isSpectator"),setReconnecting:Ct("isReconnecting"),setPlayerCount:Ct("playerCount"),setPing:Ct("ping"),setVotingSpeed:Ct("votingSpeed"),setVoteInProgress:Ct("isVoteInProgress"),setMarkedPlayer:Ct("markedPlayer"),setNomination:Ct("nomination"),setVoteHistoryAllowed:Ct("isVoteHistoryAllowed"),claimSeat:Ct("claimedSeat"),distributeRoles:Ct("isRolesDistributed"),setSessionId(e,t){e.sessionId=t.toLocaleLowerCase().replace(/[^0-9a-z]/g,"").substr(0,10)},nomination(e,{nomination:t,votes:o,votingSpeed:i,lockedVote:s,isVoteInProgress:a}={}){e.nomination=t||!1,e.votes=o||[],e.votingSpeed=i||e.votingSpeed,e.lockedVote=s||0,e.isVoteInProgress=a||!1},addHistory(e,t){if(!e.isVoteHistoryAllowed&&e.isSpectator)return;if(!e.nomination||e.lockedVote<=t.length)return;const o="traveler"===t[e.nomination[1]].role.team;e.voteHistory.push({timestamp:new Date,nominator:t[e.nomination[0]].name,nominee:t[e.nomination[1]].name,type:o?"Exile":"Execution",majority:Math.ceil(t.filter(e=>!e.isDead||o).length/2),votes:t.filter((t,o)=>e.votes[o]).map(({name:e})=>e)})},clearVoteHistory(e){e.voteHistory=[]},vote:jt,voteSync:jt,lockVote(e,t){e.lockedVote=void 0!==t?t:e.lockedVote+1}};var Tt={namespaced:!0,state:Mt,getters:It,actions:Ot,mutations:Pt},Dt=o("b1d9"),Vt=o("b249"),Et=o("c825");i["a"].use(r["a"]);const qt=(e=ge[0])=>new Map(Dt.filter(t=>t.edition===e.id||e.roles.includes(t.id)).sort((e,t)=>t.team.localeCompare(e.team)).map(e=>[e.id,e])),At=(e=ge[0])=>new Map(Dt.filter(t=>"traveler"===t.team&&t.edition!==e.id&&!e.roles.includes(t.id)).map(e=>[e.id,e])),$t=e=>({grimoire:t},o)=>{t[e]=o},Ft=e=>({grimoire:t},o)=>{t[e]=!0===o||!1===o?o:!t[e]},zt=e=>e.toLocaleLowerCase().replace(/[^a-z0-9]/g,""),Lt=new Map(ge.map(e=>[e.id,e])),Gt=new Map(Dt.map(e=>[e.id,e])),Ht=new Map(Vt.map(e=>[e.id,e]));let Bt={};try{Bt=new Map(Et.map(({id:e,hatred:t})=>[zt(e),new Map(t.map(({id:e,reason:t})=>[zt(e),t]))]))}catch(eo){console.error("couldn't load jinxes",eo)}const Ut={id:"",name:"",image:"",ability:"",edition:"custom",firstNight:0,firstNightReminder:"",otherNight:0,otherNightReminder:"",reminders:[],remindersGlobal:[],setup:!1,team:"townsfolk",isCustom:!0};var Jt=new r["a"].Store({modules:{players:xt,session:Tt},state:{grimoire:{isNight:!1,isNightOrder:!0,isPublic:!0,isMenuOpen:!1,isStatic:!1,isMuted:!1,isImageOptIn:!1,zoom:0,background:""},modals:{edition:!1,fabled:!1,gameState:!1,nightOrder:!1,reference:!1,reminder:!1,role:!1,roles:!1,voteHistory:!1},edition:Lt.get("tb"),roles:qt(),otherTravelers:At(),fabled:Ht,jinxes:Bt},getters:{customRolesStripped:({roles:e})=>{const t=[],o=Object.keys(Ut),i=["firstNightReminder","otherNightReminder","isCustom"];return e.forEach(e=>{if(e.isCustom){const s={};for(let t in e){if(i.includes(t))continue;const a=e[t];o.includes(t)&&a!==Ut[t]&&(s[o.indexOf(t)]=a)}t.push(s)}else t.push({id:e.id})}),t},rolesJSONbyId:()=>Gt},mutations:{setZoom:$t("zoom"),setBackground:$t("background"),toggleMuted:Ft("isMuted"),toggleMenu:Ft("isMenuOpen"),toggleNightOrder:Ft("isNightOrder"),toggleStatic:Ft("isStatic"),toggleNight:Ft("isNight"),toggleGrimoire:Ft("isPublic"),toggleImageOptIn:Ft("isImageOptIn"),toggleModal({modals:e},t){t&&(e[t]=!e[t]);for(let o in e)o!==t&&(e[o]=!1)},setCustomRoles(e,t){const o=t.map(e=>{if(e[0]){const t=Object.keys(Ut),o={};for(let i in e)t[i]&&(o[t[i]]=e[i]);return o}return e}).map(e=>(e.id=zt(e.id),e)).map(t=>Gt.get(t.id)||e.roles.get(t.id)||Object.assign({},Ut,t)).map(e=>(Gt.get(e.id)||(e.imageAlt={townsfolk:"good",outsider:"outsider",minion:"minion",demon:"evil",fabled:"fabled"}[e.team]||"custom",e.firstNight=Math.abs(e.firstNight),e.otherNight=Math.abs(e.otherNight)),e)).filter(e=>e.name&&e.ability&&e.team).sort((e,t)=>t.team.localeCompare(e.team));e.roles=new Map(o.filter(e=>"fabled"!==e.team).map(e=>[e.id,e])),e.fabled=new Map([...o.filter(e=>"fabled"===e.team).map(e=>[e.id,e]),...Vt.map(e=>[e.id,e])]),e.otherTravelers=new Map(Dt.filter(e=>"traveler"===e.team&&!t.some(t=>t.id===e.id)).map(e=>[e.id,e]))},setEdition(e,t){Lt.has(t.id)?(e.edition=Lt.get(t.id),e.roles=qt(e.edition),e.otherTravelers=At(e.edition)):e.edition=t,e.modals.edition=!1}},plugins:[yt.a,Nt]}),Wt=o("ecee"),Yt=o("c074"),Kt=o("f2d1"),Zt=o("ad3d");const Qt=["AddressCard","BookOpen","BookDead","BroadcastTower","Chair","CheckSquare","CloudMoon","Cog","Copy","Dice","Dragon","ExchangeAlt","ExclamationTriangle","FileCode","FileUpload","HandPaper","HandPointRight","Heartbeat","Image","Link","MinusCircle","PeopleArrows","PlusCircle","Question","Random","RedoAlt","SearchMinus","SearchPlus","Skull","Square","TheaterMasks","Times","TimesCircle","TrashAlt","Undo","User","UserEdit","UserFriends","Users","VenusMars","VolumeUp","VolumeMute","VoteYea","WindowMaximize","WindowMinimize"],Xt=["Github","Discord"];Wt["c"].add(...Qt.map(e=>Yt["a"]["fa"+e]),...Xt.map(e=>Kt["a"]["fa"+e])),i["a"].component("font-awesome-icon",Zt["a"]),i["a"].config.productionTip=!1,new i["a"]({render:e=>e(ft),store:Jt}).$mount("#app")},5720:function(e,t,o){"use strict";o("50d1")},5740:function(e,t,o){e.exports=o.p+"img/riot.a2890eee.png"},"5b44":function(e,t,o){e.exports=o.p+"img/fabled.227b24f9.png"},"5bd9":function(e,t,o){e.exports=o.p+"img/cannibal.54808c1a.png"},"5c0b":function(e,t,o){"use strict";o("9c0c")},"5c56":function(e,t,o){e.exports=o.p+"img/duchess.f8361787.png"},"5c8e":function(e,t,o){e.exports=o.p+"img/goblin.ec4fe0e0.png"},"5cf2":function(e,t,o){e.exports=o.p+"img/x.d2209023.png"},"5f4e":function(e,t,o){e.exports=o.p+"img/tb-minion.b01c557e.png"},"61b0":function(e,t,o){var i={"./acrobat.png":"887b","./alchemist.png":"dbe8","./alhadikhia.png":"9989","./amnesiac.png":"043b","./angel.png":"bfe2","./apprentice.png":"4bea","./artist.png":"2cd0","./assassin.png":"9187","./balloonist.png":"65db","./barber.png":"fcc6","./barista.png":"027a","./baron.png":"24d3","./beggar.png":"cfcc","./bishop.png":"8030","./bonecollector.png":"23b1","./boomdandy.png":"aae9","./bountyhunter.png":"899d","./buddhist.png":"1d01","./bureaucrat.png":"25f6","./butcher.png":"37dd","./butler.png":"64fe","./cannibal.png":"5bd9","./cerenovus.png":"0436","./chambermaid.png":"125e","./chef.png":"1e83","./choirboy.png":"d6bc","./clockmaker.png":"f93f","./courtier.png":"ee02","./cultleader.png":"398f","./custom.png":"fd83","./damsel.png":"72d7","./deusexfiasco.png":"9002","./deviant.png":"3b65","./devilsadvocate.png":"cd8b","./djinn.png":"e222","./doomsayer.png":"659f","./dreamer.png":"71b8","./drunk.png":"d97d","./duchess.png":"5c56","./empath.png":"bb7a","./engineer.png":"ea17","./evil.png":"c24f","./eviltwin.png":"e014","./exorcist.png":"5072","./fabled.png":"5b44","./fanggu.png":"6ac0","./farmer.png":"7a7f","./fearmonger.png":"d69f","./fibbin.png":"6eb1","./fiddler.png":"64be","./fisherman.png":"c5db","./flowergirl.png":"66ae","./fool.png":"4720","./fortuneteller.png":"43e8","./gambler.png":"dce6","./gangster.png":"97c6","./general.png":"ac9c","./goblin.png":"5c8e","./godfather.png":"99d0","./golem.png":"4eb3","./good.png":"667e","./goon.png":"55aa","./gossip.png":"cadc","./grandmother.png":"c9f5","./gunslinger.png":"ee92","./harlot.png":"559e","./hellslibrarian.png":"a367","./heretic.png":"5626","./huntsman.png":"1923","./imp.png":"3e70","./innkeeper.png":"663c","./investigator.png":"b570","./judge.png":"f09b","./juggler.png":"65ab","./king.png":"9639","./klutz.png":"adfc","./legion.png":"da81","./leviathan.png":"2b04","./librarian.png":"4d73","./lilmonsta.png":"c492","./lleech.png":"9f74","./lunatic.png":"0b61","./lycanthrope.png":"c316","./magician.png":"ab3c","./marionette.png":"e69f","./mastermind.png":"f834","./mathematician.png":"8888","./matron.png":"b1cb","./mayor.png":"b223","./mephit.png":"df5e","./mezepheles.png":"c7b7","./minion.png":"75bc","./minstrel.png":"4efd","./monk.png":"6741","./moonchild.png":"3f65","./mutant.png":"17ad","./noble.png":"f7d3","./nodashii.png":"68a4","./oracle.png":"0c12","./outsider.png":"2490","./pacifist.png":"fff1","./philosopher.png":"3603","./pithag.png":"7f07","./pixie.png":"a7b6","./plus.png":"160b","./po.png":"c73a","./poisoner.png":"f282","./politician.png":"07ab","./poppygrower.png":"3273","./preacher.png":"2094","./professor.png":"b30c","./psychopath.png":"fcdb","./pukka.png":"a6a2","./puzzlemaster.png":"27a3","./ravenkeeper.png":"0c59","./recluse.png":"177d","./revolutionary.png":"aa2d","./riot.png":"5740","./sage.png":"30b6","./sailor.png":"223c","./saint.png":"6936","./savant.png":"d715","./scapegoat.png":"327a","./scarletwoman.png":"f322","./seamstress.png":"ac7c","./sentinel.png":"af68","./shabaloth.png":"0b29","./slayer.png":"d62b","./snakecharmer.png":"4021","./snitch.png":"b7e8","./soldier.png":"4e76","./spiritofivory.png":"0d06","./spy.png":"ec1e","./stormcatcher.png":"a4c2","./sweetheart.png":"f1e5","./tealady.png":"ba9b","./thief.png":"9ce3","./tinker.png":"9f7e","./towncrier.png":"38a5","./toymaker.png":"39eb","./undertaker.png":"0e20","./vigormortis.png":"f4bd","./virgin.png":"eff4","./vortox.png":"3a43","./voudon.png":"a710","./washerwoman.png":"013f","./widow.png":"22c9","./witch.png":"f558","./x.png":"5cf2","./zombuul.png":"20ca"};function s(e){var t=a(e);return o(t)}function a(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id="61b0"},"634a":function(e){e.exports=JSON.parse('[{"townsfolk":3,"outsider":0,"minion":1,"demon":1},{"townsfolk":3,"outsider":1,"minion":1,"demon":1},{"townsfolk":5,"outsider":0,"minion":1,"demon":1},{"townsfolk":5,"outsider":1,"minion":1,"demon":1},{"townsfolk":5,"outsider":2,"minion":1,"demon":1},{"townsfolk":7,"outsider":0,"minion":2,"demon":1},{"townsfolk":7,"outsider":1,"minion":2,"demon":1},{"townsfolk":7,"outsider":2,"minion":2,"demon":1},{"townsfolk":9,"outsider":0,"minion":3,"demon":1},{"townsfolk":9,"outsider":1,"minion":3,"demon":1},{"townsfolk":9,"outsider":2,"minion":3,"demon":1}]')},"64be":function(e,t,o){e.exports=o.p+"img/fiddler.d1730aaa.png"},"64fe":function(e,t,o){e.exports=o.p+"img/butler.f4fd1640.png"},"659f":function(e,t,o){e.exports=o.p+"img/doomsayer.7ddbe262.png"},"65ab":function(e,t,o){e.exports=o.p+"img/juggler.819f88b8.png"},"65c0":function(e,t,o){},"65db":function(e,t,o){e.exports=o.p+"img/balloonist.c35c6644.png"},"663c":function(e,t,o){e.exports=o.p+"img/innkeeper.da072f0d.png"},"667e":function(e,t,o){e.exports=o.p+"img/good.daf3b560.png"},"66ae":function(e,t,o){e.exports=o.p+"img/flowergirl.6196eef9.png"},6741:function(e,t,o){e.exports=o.p+"img/monk.ff81aec2.png"},"68a4":function(e,t,o){e.exports=o.p+"img/nodashii.5220cac3.png"},6936:function(e,t,o){e.exports=o.p+"img/saint.b7a15b85.png"},"6ac0":function(e,t,o){e.exports=o.p+"img/fanggu.8fbd2e39.png"},"6b1e":function(e,t,o){},"6eb1":function(e,t,o){e.exports=o.p+"img/fibbin.9f01eb47.png"},"70ae":function(e,t,o){},"71b8":function(e,t,o){e.exports=o.p+"img/dreamer.fe5645e1.png"},"72d7":function(e,t,o){e.exports=o.p+"img/damsel.040c275d.png"},"73a1":function(e,t,o){e.exports=o.p+"img/tb-outsider.9ae6ef1b.png"},"740e":function(e,t,o){"use strict";o("f344")},7496:function(e,t,o){e.exports=o.p+"img/bmr.1d06ca78.png"},"74c9":function(e,t,o){"use strict";o("9fd8")},"75bc":function(e,t,o){e.exports=o.p+"img/minion.e02a5c96.png"},"7a7f":function(e,t,o){e.exports=o.p+"img/farmer.1534709d.png"},"7b43":function(e,t,o){},"7f07":function(e,t,o){e.exports=o.p+"img/pithag.9bdfc5a3.png"},8030:function(e,t,o){e.exports=o.p+"img/bishop.1f25f092.png"},8781:function(e,t,o){"use strict";o("6b1e")},"887b":function(e,t,o){e.exports=o.p+"img/acrobat.be49ceac.png"},8888:function(e,t,o){e.exports=o.p+"img/mathematician.cc67c625.png"},8970:function(e,t,o){"use strict";o("c0b6")},"899d":function(e,t,o){e.exports=o.p+"img/bountyhunter.b208dc71.png"},"8e72":function(e,t,o){"use strict";o("70ae")},"8e93":function(e,t,o){"use strict";o("42ed")},9002:function(e,t,o){e.exports=o.p+"img/deusexfiasco.96e5d2eb.png"},9187:function(e,t,o){e.exports=o.p+"img/assassin.ae0f2fba.png"},9224:function(e){e.exports=JSON.parse('{"a":"2.15.2"}')},"92d8":function(e,t,o){e.exports=o.p+"img/luf.8e16a6e6.png"},9441:function(e,t,o){},9538:function(e,t,o){"use strict";o("c2f3")},9639:function(e,t,o){e.exports=o.p+"img/king.3f722bb8.png"},"97c6":function(e,t,o){e.exports=o.p+"img/gangster.72167674.png"},9989:function(e,t,o){e.exports=o.p+"img/alhadikhia.1d64887e.png"},"99d0":function(e,t,o){e.exports=o.p+"img/godfather.d64b901e.png"},"9c0c":function(e,t,o){},"9ce3":function(e,t,o){e.exports=o.p+"img/thief.04afd5e0.png"},"9f74":function(e,t,o){e.exports=o.p+"img/lleech.da66feee.png"},"9f7e":function(e,t,o){e.exports=o.p+"img/tinker.ce44bde6.png"},"9fd8":function(e,t,o){},a367:function(e,t,o){e.exports=o.p+"img/hellslibrarian.3df1d423.png"},a3b0:function(e,t,o){e.exports=o.p+"img/tb-demon.0ac8cce6.png"},a4c2:function(e,t,o){e.exports=o.p+"img/stormcatcher.3f5110c6.png"},a6a2:function(e,t,o){e.exports=o.p+"img/pukka.1b1700de.png"},a710:function(e,t,o){e.exports=o.p+"img/voudon.4c0eb80c.png"},a7b6:function(e,t,o){e.exports=o.p+"img/pixie.2db5f1a2.png"},aa2d:function(e,t,o){e.exports=o.p+"img/revolutionary.68827d94.png"},aae9:function(e,t,o){e.exports=o.p+"img/boomdandy.009c74b1.png"},ab3c:function(e,t,o){e.exports=o.p+"img/magician.f076c292.png"},ac7c:function(e,t,o){e.exports=o.p+"img/seamstress.209ed80b.png"},ac9c:function(e,t,o){e.exports=o.p+"img/general.2fc65230.png"},adfc:function(e,t,o){e.exports=o.p+"img/klutz.99df79cb.png"},af68:function(e,t,o){e.exports=o.p+"img/sentinel.93d312eb.png"},b1cb:function(e,t,o){e.exports=o.p+"img/matron.6e1551e5.png"},b1d9:function(e){e.exports=JSON.parse('[{"id":"washerwoman","name":"Lavadeira","edition":"tb","team":"townsfolk","firstNight":32,"firstNightReminder":":eye: Informe um Personagem Cidado e dois jogadores, 1um deles deve ser o personagem. :eye-slash:","otherNight":0,"otherNightReminder":"","reminders":["Townsfolk","Falso"],"setup":false,"ability":"Voc comea sabendo que 1 dentre 2 jogadores  um cidado especfico."},{"id":"librarian","name":"Bibliotecria","edition":"tb","team":"townsfolk","firstNight":33,"firstNightReminder":":eye: Informe um Personagem Forasteiro e dois jogadores, um deles deve ser o personagem. :eye-slash:","otherNight":0,"otherNightReminder":"","reminders":["outsider","Falso"],"setup":false,"ability":"Voc comea sabendo que 1 dentre 2 jogadores  um Forasteiro especfico. (ou que no h Forasteiros em jogo)"},{"id":"investigator","name":"Investigador","edition":"tb","team":"townsfolk","firstNight":34,"firstNightReminder":":eye: Informe um Personagem Lacaio e dois jogadores, um deles deve ser o personagem. :eye-slash:","otherNight":0,"otherNightReminder":"","reminders":["Minion","Falso"],"setup":false,"ability":"Voc comea sabendo que 1 dentre 2 jogadores  um Lacaio especfico."},{"id":"chef","name":"Chefe de Cozinha","edition":"tb","team":"townsfolk","firstNight":35,"firstNightReminder":":eye: Informe o valor (0, 1, 2, ...) do nmero de pares de jogadores maus vizinhos. :eye-slash:","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Voc comea sabendo quantos pares de vizinhos h de jogadores do mal."},{"id":"empath","name":"Mdium","edition":"tb","team":"townsfolk","firstNight":36,"firstNightReminder":":eye: Informe o valor (0, 1, 2, ...) do nmero de vizinhos vivos maus ao lado do Mdium. :eye-slash:","otherNight":53,"otherNightReminder":":eye: Informe o valor (0, 1, 2, ...) do nmero de vizinhos vivos maus ao lado do Mdium. :eye-slash:","reminders":[],"setup":false,"ability":"Toda Noite, voc descobre quantos jogadores so do mal, dentre os seus 2 vizinhos vivos mais prximos."},{"id":"fortuneteller","name":"Vidente","edition":"tb","team":"townsfolk","firstNight":37,"firstNightReminder":":eye: Escolha uma pessoa para ser lida incorretamente, caso ainda no tenha escolhido. O Vidente escolhe dois jogadores. Responda com \'Sim\' ou \'no\' caso um desses jogadores  o Demnio. :eye-slash:","otherNight":54,"otherNightReminder":":eye: O Vidente escolhe dois jogadores. Responda com \'Sim\' ou \'no\' caso um desses jogadores  o Demnio. :eye-slash:","reminders":["Falso"],"setup":false,"ability":"Toda Noite, escolha 2 jogadores: Voc descobre se o Demnio  um deles. No entanto, existe um jogador do bem que  sempre detectado incorretamente."},{"id":"undertaker","name":"Coveiro","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":56,"otherNightReminder":":question-circle: Se um jogador foi executado hoje: :eye: Mostre o Token do Personagem desse jogador. :eye-slash:","reminders":["Executado"],"setup":false,"ability":"Toda Noite*, voc descobre qual personagem foi morto por execuo durante o Dia."},{"id":"monk","name":"Clrigo","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":13,"otherNightReminder":"O Jogador protegido anteriormente no est mais protegido. :plus-circle: :eye: O Monge aponta para um jogador, no pode escolher ele mesmo. :eye-slash: Marque esse jogador com \'Protegido\'. :plus-circle:","reminders":["Protegido"],"setup":false,"ability":"Toda Noite*, escolha um jogador (exceto voc): ele estar imune ao Demnio esta Noite."},{"id":"ravenkeeper","name":"Mestre dos Corvos","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":42,"otherNightReminder":":question-circle: Se o Mestre dos Corvos morreu esta noite: :eye: O Mestre dos Corvos escolhe um jogador. Mostre o token de personagem desse jogador. :eye-slash:","reminders":[],"setup":false,"ability":"Se voc morrer durante a Noite, acordar para escolher um jogador: Voc descobre o personagem dele."},{"id":"virgin","name":"Virgem","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Usado"],"setup":false,"ability":"Apenas na primeira vez que voc for nomeado, se o nomeador for um Cidado, ele  executado imediatamente. (A Manh  encerrada, como ocorre com qualquer execuo)"},{"id":"slayer","name":"Atirador","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Usado"],"setup":false,"ability":"Apenas uma vez no jogo, durante a fase do Dia, voc pode escolher publicamente um jogador: se ele for o Demnio, morrer."},{"id":"soldier","name":"Soldado","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Voc  imune ao Demnio."},{"id":"mayor","name":"Prefeito","edition":"tb","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se houver apenas 3 jogadores vivos e no houver execuo, seu time vence. Durante a Noite, sua morte pode ser substituda pela morte de outro jogador."},{"id":"butler","name":"Mordomo","edition":"tb","team":"outsider","firstNight":38,"firstNightReminder":":eye: O Mordomo aponta para um jogador. :eye-slash: Marque esse jogador como \'Mestre\'. :plus-circle:","otherNight":55,"otherNightReminder":":eye: O Mordomo aponta para um jogador. :eye-slash: Marque esse jogador como \'Mestre\'. :plus-circle:","reminders":["Mestre"],"setup":false,"ability":"Toda Noite, escolha um jogador para ser seu Mestre: Durante uma votao, voc no poder levantar a mo se o seu Mestre no levantar. Se o Mestre abaixar a mo, voc tambm deve abaixar."},{"id":"drunk","name":"Bbado","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Bbado"],"setup":true,"ability":"Voc no sabe que  o Bbado. Em vez disso, voc acredita ser um Cidado mas sua habilidade  apenas uma iluso."},{"id":"recluse","name":"Recluso","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Voc pode ser lido por habilidades como se fosse do mal, Lacaio ou Demnio. (MESMO ESTANDO MORTO)"},{"id":"saint","name":"Santo","edition":"tb","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se voc morrer por execuo, seu time perde."},{"id":"poisoner","name":"Envenenador","edition":"tb","team":"minion","firstNight":17,"firstNightReminder":":eye: O Envenenador escolhe um jogador. :eye-slash: Esse jogador est envenenado. :plus-circle:","otherNight":8,"otherNightReminder":"O jogador envenenado anteriormente no est mais envenenado. :plus-circle: :eye: O Envenenador escolhe um jogador. :eye-slash: Esse jogador est envenenado. :plus-circle:","reminders":["Envenenado"],"setup":false,"ability":"Toda Noite, escolha um jogador: ele est envenenado at o prximo anoitecer."},{"id":"spy","name":"Espio","edition":"tb","team":"minion","firstNight":47,"firstNightReminder":":eye: Mostre o Grimrio ao Espio pelo tempo que eles precisarem. :eye-slash:","otherNight":67,"otherNightReminder":":eye: Mostre o Grimrio ao Espio pelo tempo que eles precisarem. :eye-slash:","reminders":[],"setup":false,"ability":"Toda Noite, voc v o Grimrio (todas as informaes ocultas). Voc pode ser lido por habilidades como se fosse do Bem, Cidado ou Forasteiro (MESMO ESTANDO MORTO)."},{"id":"scarletwoman","name":"Promscua","edition":"tb","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":20,"otherNightReminder":":question-circle: Se a Promscua se tornasse o Demnio hoje: :eye: Informe-a que ela  o Demnio. :eye-slash:","reminders":["Demon"],"setup":false,"ability":"Se ainda houver 5 ou mais jogadores no-viajantes vivos e o Demnio morrer, seu personagem  substitudo pelo do Demnio."},{"id":"baron","name":"Baro","edition":"tb","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"H 2 Forasteiros adicionais. [+2 Forasteiros ]"},{"id":"imp","name":"Capeta","edition":"tb","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":24,"otherNightReminder":":eye: O Capeta escolhe um jogador. :eye-slash: Esse jogador morre. :plus-circle: Se o Capeta se escolher:  Substitua o personagem de 1 Lacaio vivo pelo Capeta. :plus-circle:  :eye: Acorde o novo Capeta. Informe-o que ele  o Capeta. :eye-slash:","reminders":["Morto"],"setup":false,"ability":"Toda Noite*, escolha um jogador: ele morre imediatamente. Se voc se matar desta forma, um Lacaio vivo substitura o personagem dele pelo seu."},{"id":"bureaucrat","name":"Burocrata","edition":"tb","team":"traveler","firstNight":1,"firstNightReminder":"O Burocrata escolhe um jogador. Coloque o marcador \'Voto x3\' do Burocrata ao lado do token de personagem do jogador escolhido.","otherNight":1,"otherNightReminder":"O Burocrata escolhe um jogador. Coloque o marcador \'Voto x3\' do Burocrata ao lado do token de personagem do jogador escolhido.","reminders":["Voto x3"],"setup":false,"ability":"Cada noite, escolha um jogador (voc no pode se escolher): O voto do escolhido conta como 3 votos amanh."},{"id":"thief","name":"Lado","edition":"tb","team":"traveler","firstNight":1,"firstNightReminder":"O Ladro escolhe um jogador. Coloque o marcador de \'voto negativo\' do Ladro ao lado do Token de personagem do jogador escolhido.","otherNight":1,"otherNightReminder":"O Ladro escolhe um jogador. Coloque o marcador de \'voto negativo\' do Ladro ao lado do Token de personagem do jogador escolhido.","reminders":["Voto Negativo"],"setup":false,"ability":"Cada noite, escolha um jogador (voc no pode se escolher): O voto do escolhido pode contar negativamente amanh."},{"id":"gunslinger","name":"Pistoleiro","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"A cada dia, aps a contagem da primeira votao, voc pode escolher um jogador que votou: ele morre."},{"id":"scapegoat","name":"Bode expiatrio","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se um jogador do seu alinhamento for executado, voc pode ser executado em seu lugar."},{"id":"beggar","name":"Mendigo","edition":"tb","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Voc deve usar um token de voto para votar. Jogadores mortos podem escolher dar a voc os seus. Nesse caso, voc aprende o alinhamento deles."},{"id":"grandmother","name":"Vov","edition":"bmr","team":"townsfolk","firstNight":39,"firstNightReminder":"Informe a Vov qual jogador  o seu Neto. Se a vov est bbada ou envenenada na primeira noite, ela recebe informaes (potencialmente) falsas sobre a identidade e / ou personagem de seu neto, mas eles ainda tm um neto (porque a colocao do neto ocorre durante a configurao do jogo). Se o dito neto morrer nas mos do Demnio, a Av tambm morrer, como esperado.","otherNight":50,"otherNightReminder":"Se o Neto da Vov foi morto pelo Demnio esta noite:   A Vov morre.","reminders":["Neto"],"setup":false,"ability":"Voc comea sabendo o personagem de um jogador. Se o Demnio o matar, voc tambm morre."},{"id":"sailor","name":"Marinheiro","edition":"bmr","team":"townsfolk","firstNight":10,"firstNightReminder":"O Marinheiro escolhe um jogador vivo. O Marinheiro ou o jogador escolhido est bbado.","otherNight":4,"otherNightReminder":"O jogador anteriormente bbado no est mais bbado. O Marinheiro escolhe um jogador vivo. O Marinheiro ou o jogador escolhido est bbado.","reminders":["Bbado"],"setup":false,"ability":"Toda noite, escolha um jogador: ele ou voc fica bbado at o anoitecer. Voc no pode morrer."},{"id":"chambermaid","name":"Camareira","edition":"bmr","team":"townsfolk","firstNight":49,"firstNightReminder":"A Camareira escolhe dois jogadores. Informe o valor (0, 1, 2, ...) de quantos desses jogadores acordaram hoje  noite por sua habilidade.","otherNight":69,"otherNightReminder":"A Camareira escolhe dois jogadores. Informe o valor (0, 1, 2, ...) de quantos desses jogadores acordaram hoje  noite por sua habilidade.","reminders":[],"setup":false,"ability":"Toda Noite, escolha 2 jogadores vivos (exceto voc): Voc descobre quantos deles acordaram esta Noite por conta de suas habilidades."},{"id":"exorcist","name":"Exorcista","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":22,"otherNightReminder":"O Exorcista escolhe um jogador, diferente da noite anterior. Se esse jogador for o Demnio:  Acorde o Demnio. Informe-o quem  o exorcista.  O Demnio no age esta noite.","reminders":["Escolhido"],"setup":false,"ability":"Toda noite*, escolha um jogador (diferente do anterior): o Demnio, se escolhido, descobre quem voc  e no acorda esta Noite."},{"id":"innkeeper","name":"Estalajadeiro","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":9,"otherNightReminder":"Os jogadores previamente protegidos e bbados perdem esses marcadores. O estalajadeiro aponta para dois jogadores. Esses jogadores esto protegidos. Um est bbado.","reminders":["Protegido","Bbado"],"setup":false,"ability":"Toda noite*, escolha 2 jogadores: eles no morrem esta noite, mas 1 fica bbado at o anoitecer."},{"id":"gambler","name":"Apostador","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":11,"otherNightReminder":"O Apostador escolhe um jogador e um personagem. Se incorreto, o jogador morre.","reminders":["Morto"],"setup":false,"ability":"Toda noite*, escolha um jogador e tente adivinhar seu personagem. Se errar, voc morre."},{"id":"gossip","name":"Fofoqueira","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":47,"otherNightReminder":"Se a afirmao pblica da fofoqueira for verdadeira:  Escolha um jogador que no esteja protegido contra a morte esta noite. Esse jogador morre.","reminders":["Morto"],"setup":false,"ability":"Todo dia, voc pode fazer um anncio publicamente.  noite, se era verdade, algum morre."},{"id":"courtier","name":"Corteso","edition":"bmr","team":"townsfolk","firstNight":19,"firstNightReminder":"O Corteso pode recusar usar a sua habilidade ou escolher um personagem. Caso o corteso use sua habilidade: Se esse personagem est em jogo, esse jogador est bbado.","otherNight":10,"otherNightReminder":"Reduza o nmero restante de dias em que o jogador escolhido est bbado. Se o Courier ainda no usou sua habilidade:  O Corteso pode recusar usar a sua habilidade ou escolher um personagem. Caso o corteso use sua habilidade: Se esse personagem est em jogo, esse jogador est bbado. Caso o Corteso fique bbado ou envenenado, seu contador continua funcionando e a embriaguez que ele est causando  temporariamente desativada.","reminders":["Bbado 3","Bbado 2","Bbado 1","Usado"],"setup":false,"ability":"Uma vez por jogo,  Noite, voc pode escolher um personagem: ele fica bbado por 3 Noites e 3 Dias."},{"id":"professor","name":"Cientista","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":45,"otherNightReminder":"Se o professor no usou sua habilidade:  O Professor pode recusar usar sua habilidade ou escolher um jogador morto.  Se esse jogador for um cidado, ele agora est vivo.","reminders":["Vivo","Usado"],"setup":false,"ability":"Uma vez por jogo,  Noite*, voc pode escolher um jogador morto: caso seja um Cidado,  ressuscitado."},{"id":"minstrel","name":"Bardo","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"Remova o marcador Todos bbados. Se um Lacaio morreu hoje: Todos os jogadores, exceto o Bardo, esto bbados. Coloque o marcador Todos bbados.","reminders":["Todos Bbados"],"setup":false,"ability":"Se um Lacaio morrer por execuo, todos os outros jogadores (exceto Viajantes) ficam bbados at o anoitecer do dia seguinte."},{"id":"tealady","name":"Moa do Ch","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Protegido"],"setup":false,"ability":"Se ambos os seus vizinhos vivos so do bem, no podem morrer."},{"id":"pacifist","name":"Pacifista","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Jogadores do Bem podem no morrer quando executados."},{"id":"fool","name":"Bobo","edition":"bmr","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Usado"],"setup":false,"ability":"Na primeira vez que voc morreria, no morre."},{"id":"tinker","name":"Mecnico","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":48,"otherNightReminder":"O mecnico pode morrer.","reminders":["Morto"],"setup":false,"ability":"Voc pode morrer a qualquer momento."},{"id":"moonchild","name":"Filha da Noite","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":49,"otherNightReminder":"Se a Filha da Noite usou sua habilidade para atingir um jogador hoje:  Se aquele jogador for do bem, ele morre.","reminders":["Morto"],"setup":false,"ability":"Quando voc for avisado que morreu, escolha um jogador publicamente:  Noite, se o escolhido era do bem, morre."},{"id":"goon","name":"Capanga","edition":"bmr","team":"outsider","firstNight":0,"firstNightReminder":"Se um jogador usou sua habilidade de personagem para escolher o Capanga:  O Capanga se torna do mesmo alinhamneto (bem/mal) desse jogador.  Informe ao Capanga o seu alinhamneto atual.","otherNight":0,"otherNightReminder":"Se um jogador usou sua habilidade de personagem para escolher o Capanga:  O Capanga se torna do mesmo alinhamneto (bem/mal) desse jogador.  Informe ao Capanga o seu alinhamneto atual.","reminders":["Bbado"],"setup":false,"ability":"Toda Noite, o primeiro jogador a escolher voc com sua habilidade, fica bbado at o anoitecer. Voc se junta ao time dele."},{"id":"lunatic","name":"Lunatico","edition":"bmr","team":"outsider","firstNight":7,"firstNightReminder":"Se houver 7 ou mais jogadores: Informe ao Luntico os seus \'Lacaios\'. Mostrar 3 Blefes de Personagens bons arbitrrios. Se o Personagem recebido pelo Luntico for um Demnio que acordaria na primeira noite:  Permita que o Luntico faa as aes do Demnio. Coloque seus marcadores de \'ataque\'. Acorde o Demnio. Informe-o que ele  o Demnio e o jogador que  o luntico.  Se o Lunatico atacou hoje: Informe ao Demnio real os alvos do Luntico. Remova os marcadores de ataque do Lunatico.","otherNight":21,"otherNightReminder":"Permita que o Luntico faa as aes do Demnio. Coloque seus marcadores de \'ataque\'. Se o Lunatico selecionou jogadores: Desperte o Demnio. Informe ao Demnio real os alvos do Luntico. Remova os marcadores de ataque do Lunatico.","reminders":["Ataque 1","Ataque 2","Ataque 3"],"setup":false,"ability":"Voc acredita ser o Demnio, mas voc no . O Demnio sabe quem voc  e quem voc escolhe  noite."},{"id":"godfather","name":"Chefe da Mfia","edition":"bmr","team":"minion","firstNight":21,"firstNightReminder":"Informe ao Chefe da Mfia os personagens Forasteiros que esto em jogo.","otherNight":38,"otherNightReminder":"Se um Forasteiro morreu hoje:   O Chefe da Mfia escolhe um jogador. Esse jogador morre.","reminders":["Morreu Hoje","Morto"],"setup":true,"ability":"Voc comea sabendo quais Forasteiros esto em jogo. Se um Forasteiro morreu de dia, voc escolhe um jogador  noite: ele morre. [-1 ou +1 Forasteiro]"},{"id":"devilsadvocate","name":"Advogado do Diabo","edition":"bmr","team":"minion","firstNight":22,"firstNightReminder":"O Advogado do Diabo aponta para um jogador vivo. Esse jogador sobrevive a execuo amanh.","otherNight":14,"otherNightReminder":"O Advogado do Diabo aponta para um jogador vivo, diferente do escolhido na noite anterior. Esse jogador sobrevive a execuo amanh","reminders":["Sobrevive a execuo"],"setup":false,"ability":"Toda noite, escolha um jogador vivo(diferente do anterior): de dia, ele no morrer se for executado."},{"id":"assassin","name":"Assassino","edition":"bmr","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":37,"otherNightReminder":"Se o Assassino ainda no usou sua habilidade:  O Assassino pode recusar usar a habilidade ou aponta para um jogador. Esse jogador morre mesmo que ele no possa.","reminders":["Morto","Usado"],"setup":false,"ability":"Uma vez por jogo,  Noite*, escolha um jogador: ele morre, mesmo que algo impea."},{"id":"mastermind","name":"Mentor","edition":"bmr","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se o Demnio morrer por execuo (finalizando o jogo), jogue por mais 1 dia. Se ento, um jogador for executado o time dele perde."},{"id":"zombuul","name":"Zombuul","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":25,"otherNightReminder":"Se ningum morreu durante o dia:  O Zombuul escolhe um jogador. Esse jogador morre.","reminders":["Morreu hoje","Morto"],"setup":false,"ability":"Toda Noite*, se ningum morreu de dia, escolha um jogador: ele morre. Na 1 vez que voc morre, permanece vivo, mas  lido como morto."},{"id":"pukka","name":"Pukka","edition":"bmr","team":"demon","firstNight":28,"firstNightReminder":"A pukka escolhe um jogador, Esse jogador est envenenado e morrer imediatamente antes da Pukka acordar na prxima noite, mesmo que no que ela no acorde.","otherNight":26,"otherNightReminder":"Jogadores Envenenados morrem, mesmo que a Pukka esteja atualmente envenenada/bbada. Pukka Escolhe um jogador, esse jogador est envenenado e morrer imediatamente antes da Pukka acordar na prxima noite, mesmo que no que ela no acorde.","reminders":["Envenenado","Morto"],"setup":false,"ability":"Toda noite, escolha um jogador: ele  envenenado. O jogador envenenado anteriormente morre e ento  curado do veneno."},{"id":"shabaloth","name":"Shabaloth","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":27,"otherNightReminder":"Um jogador que o Shabaloth escolheu na noite anterior pode ganhar vida. O Shabaloth escolhe dois jogadores. Esses jogadores morrem, na ordem que foram escolhidos.","reminders":["Morto","Vivo"],"setup":false,"ability":"Toda Noite*, escolha dois jogadores: eles morrem na ordem que voc escolheu. Um jogador escolhido na noite anterior pode ser ressuscitado."},{"id":"po","name":"Po","edition":"bmr","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":28,"otherNightReminder":"If the Po chose no-one the previous night: The Po points to three players. Otherwise: The Po either shows the \'no\' head signal , or points to a player. Chosen players die","reminders":["Dead","3 attacks"],"setup":false,"ability":"Each night*, you may choose a player: they die. If your last choice was no-one, choose 3 players tonight."},{"id":"apprentice","name":"Aprendiz","edition":"bmr","team":"traveler","firstNight":1,"firstNightReminder":"Informe ao Aprendiz qual personagem ele copiou a habilidade de Cidado ou Lacaio. No Grimrio, substitua a ficha de Aprendiz por aquela ficha de personagem e coloque o marcador de \'Habilidade de Aprendiz\' do Aprendiz.","otherNight":0,"otherNightReminder":"","reminders":["Habilidade de aprendiz"],"setup":false,"ability":"Em sua 1 noite, voc ganha uma habilidade de Cidado (se for bom), ou uma habilidade de Lacaio (se for mal)."},{"id":"matron","name":"Matrona","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"A cada dia, voc pode escolher at 3 pares de jogadores para trocar de lugar. Os jogadores no podem deixar seus lugares para conversar em particular."},{"id":"judge","name":"Juiz","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Usado"],"setup":false,"ability":"Uma vez por jogo, se outro jogador for nomeado, voc pode escolher forar a execuo atual para passar ou falhar."},{"id":"bishop","name":"Bispo","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Nomeado Bom","Nomeado Mal"],"setup":false,"ability":"Apenas o Narrador pode indicar. Pelo menos 1 jogador de cada alinhamento deve ser nomeado a cada dia."},{"id":"voudon","name":"Voudon","edition":"bmr","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"S voc e os mortos podem votar. Eles no precisam de um token de voto para fazer isso. Regra da maioria (mais de 50% dos votos a favor) no  necessria."},{"id":"clockmaker","name":"Relojoeiro","edition":"snv","team":"townsfolk","firstNight":40,"firstNightReminder":"Informe ao Relojoeiro o valor (1, 2, 3, etc.) da distancia entre os assentos do Demnio ao Lacaio mais prximo.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Na primeira Noite, voc descobre a distncia entre o Demnio e seu Lacaio mais prximo."},{"id":"dreamer","name":"Sonhador","edition":"snv","team":"townsfolk","firstNight":41,"firstNightReminder":"O Sonhador escolhe um jogador. Informe-o de dois personagens um do Bem e outro do Mal, o jogador escolhido deve ser um desses personagens.","otherNight":57,"otherNightReminder":"O Sonhador escolhe um jogador. Informe-o de dois personagens um do Bem e outro do Mal, o jogador escolhido deve ser um desses personagens.","reminders":[],"setup":false,"ability":"Toda Noite, escolha um jogador (exceto voc): voc descobre que ele  um dentre dois personagens de times opostos. (bem/mal)"},{"id":"snakecharmer","name":"Encantador de Serpentes","edition":"snv","team":"townsfolk","firstNight":20,"firstNightReminder":"O Encantador de Serpentes escolhe um jogador. Se esse jogador for o Demnio: Troque as fichas de personagem Encantador de Serpentes e Demnio. Desperte o novo Demnio. Informe-o que ele  o novo Dmonio e seu alinhamento como do mal. O novo Encantador de Serpentes est envenenado. Acorde o novo Encantador de Serpentes. Informe-o que ele agora  o Encantador de Serpentes e seu alinhamento como do bem.","otherNight":12,"otherNightReminder":"O Encantador de Serpentes escolhe um jogador. Se esse jogador for o Demnio: Troque as fichas de personagem Encantador de Serpentes e Demnio. Desperte o novo Demnio. Informe-o que ele  o novo Dmonio e seu alinhamento como do mal. O novo Encantador de Serpentes est envenenado. Acorde o novo Encantador de Serpentes. Informe-o que ele agora  o Encantador de Serpentes e seu alinhamento como do bem.","reminders":["Envenenado"],"setup":false,"ability":"Toda Noite, escolha um jogador vivo: se escolher um Demnio, ele troca de personagem e time com voc, depois fica envenenado."},{"id":"mathematician","name":"Matemtico","edition":"snv","team":"townsfolk","firstNight":50,"firstNightReminder":"Informe ao Matemtico o valor (0, 1, 2, etc.) dos marcadores de \'Efeito anormal\'. Remova os marcadores","otherNight":70,"otherNightReminder":"Informe ao Matemtico o valor (0, 1, 2, etc.) dos marcadores de \'Efeito anormal\'. Remova os marcadores.","reminders":["Efeito Anormal"],"setup":false,"ability":"Toda Noite, voc descobre quantas habilidades, desde o amanhecer, no tiveram o efeito esperado devido a habilidades de outros personagens."},{"id":"flowergirl","name":"Florista","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"Coloque o marcador Demnio no votou.","otherNight":58,"otherNightReminder":"Informe a Florista se o Dmonio votou hoje.","reminders":["Demnio votou","Demnio no votou"],"setup":false,"ability":"Toda Noite*, voc descobre se o Demnio votou durante o Dia."},{"id":"towncrier","name":"Mensageiro","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"Coloque o marcador \'Lacaio no nomeou\'.","otherNight":59,"otherNightReminder":"Informe ao Mensageiro se o Lacaio nomeou hoje.","reminders":["Lacaio no nomeou","Lacaio Nomeou"],"setup":false,"ability":"Toda Noite*, voc descobre se algum Lacaio nomeou hoje."},{"id":"oracle","name":"Oraculo","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":60,"otherNightReminder":"Informe ao Oraculo o valor (0, 1, 2, etc.) de jogadores maus mortos.","reminders":[],"setup":false,"ability":"Toda Noite*, voc descobre quantos jogadores do Mal esto mortos."},{"id":"savant","name":"Erudito","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Todo Dia, voc pode visitar o Storyteller para ouvir duas informaes: uma verdadeira e uma falsa."},{"id":"seamstress","name":"Costureira","edition":"snv","team":"townsfolk","firstNight":42,"firstNightReminder":"A Costureira pode recusar usar sua habilidade ou escolher dois outros jogadores. Se a costureira escolheu dois jogadores, informe-a se  eles so do mesmo alinhamento (bem/mal).","otherNight":61,"otherNightReminder":"Se a Costureira ainda no usou sua habilidade: A Costureira pode recusar usar sua habilidade ou escolher dois outros jogadores. Se a costureira escolheu dois jogadores, informe-a se  eles so do mesmo alinhamento (bem/mal).","reminders":["Usado"],"setup":false,"ability":"Uma vez por jogo, durante a Noite, voc pode escolher 2 jogadores(exceto voc): voc descobre se eles so do mesmo time."},{"id":"philosopher","name":"Filsofo","edition":"snv","team":"townsfolk","firstNight":2,"firstNightReminder":"O Filsofo pode recusar usar sua habilidade ou escolher um personagem do bem. Se ele escolher um personagem: O Filsofo ganha a habilidade do personagem escolhido. E se o personagem est em jogo, esse jogador est bbado at que o Filsofo morra.","otherNight":2,"otherNightReminder":"Se o Filsofo ainda no usou sua habilidade: O Filsofo pode recusar usar sua habilidade ou escolher um personagem do bem. Se ele escolher um personagem: O Filsofo ganha a habilidade do personagem escolhido. E se o personagem est em jogo, esse jogador est bbado at que o Filsofo morra.","reminders":["Bbado","No  o Filsofo"],"setup":false,"ability":"Uma vez por jogo, durante a Noite, voc pode escolher um personagem do bem: voc ganha a habilidade dele. Se algum j  for esse personagem, esse personagem fica bbado at o Filsofo morrer, mesmo que o personagem troque de jogador durante o jogo."},{"id":"artist","name":"Artista","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Usado"],"setup":false,"ability":"Uma vez por jogo, durante o Dia, voc pode fazer uma pergunta de sim ou no para o Storyteller. (Em segredo)"},{"id":"juggler","name":"Malabarista","edition":"snv","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":62,"otherNightReminder":"Se hoje foi o primeiro dia do malabarista:  Informe-o o nmero (0, 1, 2, etc.) de advinhaes corretas.","reminders":["Correto"],"setup":false,"ability":"No primeiro dia, voc pode tentar adivinhar publicamente os personagens de at 5 jogadores. Durante a Noite, voc descobre quantos voc acertou."},{"id":"sage","name":"Sbio","team":"townsfolk","edition":"snv","firstNight":0,"firstNightReminder":"","otherNight":43,"otherNightReminder":"Se o Sbio foi morto por um Demnio: Informe ao Sbio dois jogadores, um dos quais  o Demnio.","reminders":[],"setup":false,"ability":"Se voc for morto pelo Demnio, voc descobre que ele  1 dentre 2 jogadores."},{"id":"mutant","name":"Mutante","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se voc insinuar que  um Forasteiro, voc pode ser executado imediatamente. Se voc estiver alucinado que  um Forasteiro, voc pode ser executado."},{"id":"sweetheart","name":"Queridinha","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":41,"otherNightReminder":"","reminders":["Bbado"],"setup":false,"ability":"Se voc morrer, um jogador fica bbado."},{"id":"barber","name":"Barbeiro","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":40,"otherNightReminder":"Se o Barbeiro morreu hoje: Desperte o Demnio. Informe-o que o Barbeiro morreu este dia. O Demnio pode recusar usar a habilidade do Barbeiro ou escolher 2 jogadores que no so Demnio. Se ele escolher jogadores: Troque as fichas de personagem. Acorde cada jogador. Informe-os quais so seus novos personagens.","reminders":["Troca"],"setup":false,"ability":"Se voc morrer, esta Noite o Demnio pode escolher dois jogadores: eles trocam de personagens entre si."},{"id":"klutz","name":"Desastrado","edition":"snv","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Quando sua morte for declarada, escolha publicamente um jogador vivo do Bem, ou seu time perde."},{"id":"eviltwin","name":"Gmea M","edition":"snv","team":"minion","firstNight":23,"firstNightReminder":"Acorde a gmea m e informe-a quem  sua gmea boa e sua habilidade. Acorde a Gema Boa e informe-a quem  a sua Gmea M.","otherNight":0,"otherNightReminder":"","reminders":["Gmea"],"setup":false,"ability":"Voc e um oponente sabem o personagem um do outro. Se o jogador do bem for executado, o Mal vence. O bem no pode vencer enquanto ambos viverem."},{"id":"witch","name":"Bruxa","edition":"snv","team":"minion","firstNight":24,"firstNightReminder":"A Bruxa escolhe um jogador. Esse jogador esta amaldioado no prximo dia.","otherNight":15,"otherNightReminder":"A Bruxa escolhe um jogador. Esse jogador esta amaldioado no prximo dia.","reminders":["Amaldioado"],"setup":false,"ability":"Toda Noite, escolha um jogador: se ele nomear durante o prximo Dia, morre. Se apenas 3 jogadores estiverem vivos, voc perde esta habilidade."},{"id":"cerenovus","name":"Cerenovus","edition":"snv","team":"minion","firstNight":25,"firstNightReminder":"O Cerenovus escolhe um jogador e, em seguida, para um personagem do Bem ou Goblin se estiver em jogo. Esse jogador deve alucinar ser esse personagem. Acorde aquele jogador. Informe-o que o Cerenovus o escolheu. Informe-o que ele deve \'alucinar\' ser o personagem escolhido.","otherNight":16,"otherNightReminder":"O Cerenovus escolhe um jogador e, em seguida, para um personagem do Bem ou Goblin se estiver em jogo. Esse jogador deve alucinar ser esse personagem. Acorde aquele jogador. Informe-o que o Cerenovus o escolheu. Informe-o que ele deve \'alucinar\' ser o personagem escolhido.","reminders":["Louco"],"setup":false,"ability":"Toda Noite, escolha um personagem do Bem e um Jogador: o jogador deve ficar alucinado que  esse personagem durante o prximo Dia; do contrrio, pode ser executado imediatamente."},{"id":"pithag","name":"Velha do Fosso","edition":"snv","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":17,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Toda Noite*, escolha um jogador para se tornar um novo personagem (no funciona se j estiver em jogo). Se o personagem escolhido for um Demnio, as mortes sero arbitrrias esta Noite."},{"id":"fanggu","name":"Fang Gu","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":29,"otherNightReminder":"O Fang Gu escolhe um jogador. Esse jogador morre. Ou, se esse jogador for o Primeiro Forasteiro escolhido pelo Fang Gu no Jogo:  O Fang Gu morre em vez do jogador escolhido. O jogador escolhido agora  um mal Fang Gu.  Desperte o novo Fang Gu. Informe-o que ele  o Fang Gu do Mal.","reminders":["Morto"],"setup":true,"ability":"Toda Noite*, voc escolhe um jogador: ele morre imediatamente. O primeiro Forasteiro escolhido torna-se um Fang Gu do Mal e voc morre no lugar dele. [+1 Forasteiro]"},{"id":"vigormortis","name":"Vigormortis","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":32,"otherNightReminder":"O Vigormortis escolhe um jogador. O jogador morre. Se um Lacaio, ele mantm sua habilidade e um de seus vizinhos de Cidado  envenenado.","reminders":["Morto","Envenenado","Habilidade Ativa"],"setup":true,"ability":"Toda Noite*, voc escolhe um jogador: ele morre imediatamente. Lacaios que voc mata mantm suas habilidades e envenenam um vizinho cidado. [-1 Forasteiro]."},{"id":"nodashii","name":"No Dashii","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":30,"otherNightReminder":"O No Dashii escolhe um jogador. O jogador morre.","reminders":["Morto","Envenenado"],"setup":false,"ability":"Toda Noite*, voc escolhe um jogador: ele morre imediatamente. Seus dois vizinhos Cidados esto envenenados."},{"id":"vortox","name":"Vortox","edition":"snv","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":31,"otherNightReminder":"O Vortox escolhe um jogador. O jogador morre.","reminders":["Morto"],"setup":false,"ability":"Toda Noite*, voc escolhe um jogador: ele morre imediatamente. Habilidades do Bem geram informaes falsas. Todo Dia, se ningum for executado, o Mal vence."},{"id":"barista","name":"Barista","edition":"snv","team":"traveler","firstNight":1,"firstNightReminder":"Todas as noites, coloque o lembrete \'Sbrio e saudvel\' do Barista ou seu lembrete \'Atua duas vezes\' ao lado de qualquer Token de Personagem. Acorde o jogador desse personagem e informe-o que o Barista o escolheu e se ele esta \'sbrio e saudvel\' ou se ele pode agir duas vezes.","otherNight":1,"otherNightReminder":"Todas as noites, coloque o lembrete \'Sbrio e saudvel\' do Barista ou seu lembrete \'Atua duas vezes\' ao lado de qualquer Token de Personagem. Acorde o jogador desse personagem e informe-o que o Barista o escolheu e se ele esta \'sbrio e saudvel\' ou se ele pode agir duas vezes.","reminders":["Atua duas vezes","Sbrio e Saudvel"],"setup":false,"ability":"Cada noite, at o anoitecer, 1- um jogador fica sbrio, saudvel e obtm informaes verdadeiras, ou 2- sua habilidade funciona duas vezes. Eles aprendem qual."},{"id":"harlot","name":"Meretriz","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":1,"otherNightReminder":"A Meretriz escolher um jogador. Ento, coloque a Meretriz para dormir. Acorde o jogador escolhido, informe-o que a meretriz o escolheu. Se ele concordar em se deitar com a Meretriz, acorde a Meretriz e mostre a ficha de personagem do jogador escolhido. Ento, voc pode decidir que ningum morra ou ambos os jogadores morram.","reminders":["Morto"],"setup":false,"ability":"Cada noite *, escolha um jogador vivo: se eles concordarem, voc aprende o personagem deles, mas os dois podem morrer."},{"id":"butcher","name":"Aougueiro","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"A cada dia, aps a 1 execuo, voc nomeia novamente."},{"id":"bonecollector","name":"Coletor de Osso","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":1,"otherNightReminder":"O Coletor de Ossos pode recusar usar a habilidade ou escolhe qualquer jogador morto. Se ele escolher algum jogador morto, coloque o lembrete \'Tem Habilidade\' do Colecionador de Ossos ao lado da ficha de personagem do jogador escolhido. (Eles podem precisar ser acordados esta noite para us-lo.)","reminders":["Usado","Habilidade Ativa"],"setup":false,"ability":"Uma vez por jogo,  noite, escolha um jogador morto: ele recupera suas habilidades at o anoitecer."},{"id":"deviant","name":"Divergente","edition":"snv","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Se voc foi engraado hoje, voc no pode ser exilado."},{"id":"noble","name":"Noble","edition":"","team":"townsfolk","firstNight":43,"firstNightReminder":"Point to 3 players including one evil player, in no particular order.","otherNight":0,"otherNightReminder":"","reminders":["Seen"],"setup":false,"ability":"You start knowing 3 players, 1 and only 1 of which is evil."},{"id":"bountyhunter","name":"Caador de Recompensas","edition":"","team":"townsfolk","firstNight":45,"firstNightReminder":"Antes da partida comear, um cidado  escolhido como do mal e um dos personagens do mal  escolhido como alvo do Caador de Recompensas. Informe ao cidado do mal o seu alinhamento no inicio da Primeira Noite. Ento mesmo que o Caador de Recompensas esteja bbado/envenenado na primeira noite ainda vai ter um personagem alvo. Informe ao Caador de Recompensas qual jogador  seu alvo. Caso o Caador de Recompensas esteja bbado/envenenado na primeira noite informe-o um jogador que no seja o seu alvo.","otherNight":65,"otherNightReminder":"Se o alvo do Caador de Recompensas morreu desde a noite anterior: Informe-o seu novo alvo. Caso o jogador marcado como Alvo se tornar bom, mova o marcador de Alvo para um jogador da equipe do mal e desperte o Caador de Recompensas na prxima oportunidade para ele aprender isso.","reminders":["Alvo"],"setup":true,"ability":"Voc comea o jogo sabendo quem  1 jogador do mal. Se esse jogador do mal morrer, voc descobre outro nesta noite. [1 Cidado  Mal]"},{"id":"pixie","name":"Pixie","edition":"","team":"townsfolk","firstNight":29,"firstNightReminder":"Informe um Cidado que est em jogo para a Pixie.","otherNight":0,"otherNightReminder":"","reminders":["Mad","Has ability"],"setup":false,"ability":"Voc comea o jogo sabendo 1 Cidado em jogo. Se voc estiver alucinando ser esse personagem, voc ganha a habilidade dele quando ele morrer."},{"id":"general","name":"General","edition":"","team":"townsfolk","firstNight":48,"firstNightReminder":"Informe ao General: bom, mau ou nenhum; para o alinhamento que voc acredita estar ganhando.","otherNight":68,"otherNightReminder":"Informe ao General: bom, mau ou nenhum; para o alinhamento que voc acredita estar ganhando.","reminders":[],"setup":false,"ability":"Cada noite, voc descobre qual tendncia o Storyteller acredita que est ganhando: Bem, Mal ou Nenhum."},{"id":"preacher","name":"Preacher","edition":"","team":"townsfolk","firstNight":14,"firstNightReminder":"The Preacher chooses a player. If a Minion is chosen, wake the Minion and show the \'This character selected you\' card and then the Preacher token.","otherNight":7,"otherNightReminder":"The Preacher chooses a player. If a Minion is chosen, wake the Minion and show the \'This character selected you\' card and then the Preacher token.","reminders":["At a sermon"],"setup":false,"ability":"Each night, choose a player: a Minion, if chosen, learns this. All chosen Minions have no ability."},{"id":"king","name":"King","edition":"","team":"townsfolk","firstNight":9,"firstNightReminder":"Wake the Demon, show them the \'This character selected you\' card, show the King token and point to the King player.","otherNight":64,"otherNightReminder":"If there are more dead than living, show the King a character token of a living player.","reminders":[],"setup":false,"ability":"Each night, if the dead outnumber the living, you learn 1 alive character. The Demon knows who you are."},{"id":"balloonist","name":"Balloonist","edition":"","team":"townsfolk","firstNight":44,"firstNightReminder":"Choose a character type. Point to a player whose character is of that type. Place the Balloonist\'s Seen reminder next to that character.","otherNight":63,"otherNightReminder":"Choose a character type that does not yet have a Seen reminder next to a character of that type. Point to a player whose character is of that type, if there are any. Place the Balloonist\'s Seen reminder next to that character.","reminders":["Seen Townsfolk","Seen Outsider","Seen Minion","Seen Demon","Seen Traveller"],"setup":true,"ability":"Each night, you learn 1 player of each character type, until there are no more types to learn. [+1 Outsider]"},{"id":"cultleader","name":"Cult Leader","edition":"","team":"townsfolk","firstNight":46,"firstNightReminder":"If the cult leader changed alignment, show them the thumbs up good signal of the thumbs down evil signal accordingly.","otherNight":66,"otherNightReminder":"If the cult leader changed alignment, show them the thumbs up good signal of the thumbs down evil signal accordingly.","reminders":[],"setup":false,"ability":"Each night, you become the alignment of an alive neighbour. If all good players choose to join your cult, your team wins."},{"id":"lycanthrope","name":"Lycanthrope","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":23,"otherNightReminder":"The Lycanthrope points to a living player: if good, they die and no one else can die tonight.","reminders":["Dead"],"setup":false,"ability":"Each night*, choose a living player: if good, they die, but they are the only player that can die tonight."},{"id":"amnesiac","name":"Amnesiac","edition":"","team":"townsfolk","firstNight":12,"firstNightReminder":"Decide the Amnesiac\'s entire ability. If the Amnesiac\'s ability causes them to wake tonight: Wake the Amnesiac and run their ability.","otherNight":5,"otherNightReminder":"If the Amnesiac\'s ability causes them to wake tonight: Wake the Amnesiac and run their ability.","reminders":["?"],"setup":false,"ability":"You do not know what your ability is. Each day, privately guess what it is: you learn how accurate you are."},{"id":"engineer","name":"Engineer","edition":"","team":"townsfolk","firstNight":13,"firstNightReminder":"The Engineer shows a \'no\' head signal, or points to a Demon or points to the relevant number of Minions. If the Engineer chose characters, replace the Demon or Minions with the choices, then wake the relevant players and show them the You are card and the relevant character tokens.","otherNight":6,"otherNightReminder":"The Engineer shows a \'no\' head signal, or points to a Demon or points to the relevant number of Minions. If the Engineer chose characters, replace the Demon or Minions with the choices, then wake the relevant players and show them the \'You are\' card and the relevant character tokens.","reminders":["No ability"],"setup":false,"ability":"Once per game, at night, choose which Minions or which Demon is in play."},{"id":"fisherman","name":"Fisherman","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["No ability"],"setup":false,"ability":"Once per game, during the day, visit the Storyteller for some advice to help you win."},{"id":"huntsman","name":"Huntsman","edition":"","team":"townsfolk","firstNight":30,"firstNightReminder":"The Huntsman shakes their head \'no\' or points to a player. If they point to the Damsel, wake that player, show the \'You are\' card and a not-in-play character token.","otherNight":51,"otherNightReminder":"The Huntsman shakes their head \'no\' or points to a player. If they point to the Damsel, wake that player, show the \'You are\' card and a not-in-play character token.","reminders":["No ability"],"setup":true,"ability":"Once per game, at night, choose a living player: the Damsel, if chosen, becomes a not-in-play Townsfolk. [+the Damsel]"},{"id":"alchemist","name":"Alchemist","edition":"","team":"townsfolk","firstNight":3,"firstNightReminder":"Show the Alchemist a not-in-play Minion token","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Is the Alchemist"],"setup":false,"ability":"You have a not-in-play Minion ability."},{"id":"farmer","name":"Farmer","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":46,"otherNightReminder":"If a Farmer died tonight, choose another good player and make them the Farmer. Wake this player, show them the \'You are\' card and the Farmer character token.","reminders":[],"setup":false,"ability":"If you die at night, an alive good player becomes a Farmer."},{"id":"magician","name":"Magician","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"The Demon thinks you are a Minion. Minions think you are a Demon."},{"id":"choirboy","name":"Choirboy","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":44,"otherNightReminder":"If the King was killed by the Demon, wake the Choirboy and point to the Demon player.","reminders":[],"setup":true,"ability":"If the Demon kills the King, you learn which player is the Demon. [+ the King]"},{"id":"poppygrower","name":"Poppy Grower","edition":"","team":"townsfolk","firstNight":4,"firstNightReminder":"Do not inform the Demon/Minions who each other are","otherNight":3,"otherNightReminder":"If the Poppy Grower has died, show the Minions/Demon who each other are.","reminders":["Evil wakes"],"setup":false,"ability":"Minions & Demons do not know each other. If you die, they learn who each other are that night."},{"id":"cannibal","name":"Cannibal","edition":"","team":"townsfolk","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Poisoned","Died today"],"setup":false,"ability":"You have the ability of the recently killed executee. If they are evil, you are poisoned until a good player dies by execution."},{"id":"snitch","name":"Snitch","edition":"","team":"outsider","firstNight":6,"firstNightReminder":"After Minion info wake each Minion and show them three not-in-play character tokens. These may be the same or different to each other and the ones shown to the Demon.","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Minions start knowing 3 not-in-play characters."},{"id":"acrobat","name":"Acrobat","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":39,"otherNightReminder":"If a good living neighbour is drunk or poisoned, the Acrobat player dies.","reminders":["Dead"],"setup":false,"ability":"Each night*, if either good living neighbour is drunk or poisoned, you die."},{"id":"puzzlemaster","name":"Puzzlemaster","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Drunk","Guess used"],"setup":false,"ability":"1 player is drunk, even if you die. If you guess (once) who it is, learn the Demon player, but guess wrong & get false info."},{"id":"heretic","name":"Heretic","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Whoever wins, loses & whoever loses, wins, even if you are dead."},{"id":"damsel","name":"Damsel","edition":"","team":"outsider","firstNight":31,"firstNightReminder":"Wake all the Minions, show them the \'This character selected you\' card and the Damsel token.","otherNight":52,"otherNightReminder":"If selected by the Huntsman, wake the Damsel, show \'You are\' card and a not-in-play Townsfolk token.","reminders":["Guess used"],"setup":false,"ability":"All Minions know you are in play. If a Minion publicly guesses you (once), your team loses."},{"id":"golem","name":"Golem","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Can not nominate"],"setup":false,"ability":"You may only nominate once per game. When you do, if the nominee is not the Demon, they die."},{"id":"politician","name":"Politician","edition":"","team":"outsider","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you were the player most responsible for your team losing, you change alignment & win, even if dead."},{"id":"widow","name":"Widow","edition":"","team":"minion","firstNight":18,"firstNightReminder":"Show the Grimoire to the Widow for as long as they need. The Widow points to a player. That player is poisoned. Wake a good player. Show the \'These characters are in play\' card, then the Widow character token.","otherNight":0,"otherNightReminder":"","reminders":["Poisoned"],"remindersGlobal":["Knows"],"setup":false,"ability":"On your 1st night, look at the Grimoire and choose a player: they are poisoned. 1 good player knows a Widow is in play."},{"id":"fearmonger","name":"Fearmonger","edition":"","team":"minion","firstNight":26,"firstNightReminder":"The Fearmonger points to a player. Place the Fear token next to that player and announce that a new player has been selected with the Fearmonger ability.","otherNight":18,"otherNightReminder":"The Fearmonger points to a player. If different from the previous night, place the Fear token next to that player and announce that a new player has been selected with the Fearmonger ability.","reminders":["Fear"],"setup":false,"ability":"Each night, choose a player. If you nominate & execute them, their team loses. All players know if you choose a new player."},{"id":"psychopath","name":"Psychopath","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Each day, before nominations, you may publicly choose a player: they die. If executed, you only die if you lose roshambo."},{"id":"goblin","name":"Goblin","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":["Claimed"],"setup":false,"ability":"If you publicly claim to be the Goblin when nominated & are executed that day, your team wins."},{"id":"mephit","name":"Mephit","edition":"","team":"minion","firstNight":27,"firstNightReminder":"Show the Mephit their secret word.","otherNight":19,"otherNightReminder":"Wake the 1st good player that said the Mephit\'s secret word and show them the \'You are\' card and the thumbs down evil signal.","reminders":["Turns evil","No ability"],"setup":false,"ability":"You start knowing a secret word. The 1st good player to say this word becomes evil that night."},{"id":"mezepheles","name":"Mezepheles","edition":"","team":"minion","firstNight":27,"firstNightReminder":"Show the Mezepheles their secret word.","otherNight":19,"otherNightReminder":"Wake the 1st good player that said the Mezepheles\' secret word and show them the \'You are\' card and the thumbs down evil signal.","reminders":["Turns evil","No ability"],"setup":false,"ability":"You start knowing a secret word. The 1st good player to say this word becomes evil that night."},{"id":"marionette","name":"Marionette","edition":"","team":"minion","firstNight":11,"firstNightReminder":"Select one of the good players next to the Demon and place the Is the Marionette reminder token. Wake the Demon and show them the Marionette.","otherNight":0,"otherNightReminder":"","reminders":[],"remindersGlobal":["Is the Marionette"],"setup":true,"ability":"You think you are a good character but you are not. The Demon knows who you are. [You neighbour the Demon]"},{"id":"boomdandy","name":"Boomdandy","edition":"","team":"minion","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"If you are executed, all but 3 players die. 1 minute later, the player with the most players pointing at them dies."},{"id":"lilmonsta","name":"Lil\' Monsta","edition":"","team":"demon","firstNight":16,"firstNightReminder":"Wake all Minions together, allow them to vote by pointing at who they want to babysit Lil\' Monsta.","otherNight":36,"otherNightReminder":"Wake all Minions together, allow them to vote by pointing at who they want to babysit Lil\' Monsta. Choose a player, that player dies.","reminders":[],"remindersGlobal":["Is the Demon","Dead"],"setup":true,"ability":"Each night, Minions choose who babysits Lil\' Monsta\'s token & \\"is the Demon\\". A player dies each night*. [+1 Minion]"},{"id":"lleech","name":"Lleech","edition":"","team":"demon","firstNight":15,"firstNightReminder":"The Lleech points to a player. Place the Poisoned reminder token.","otherNight":35,"otherNightReminder":"The Lleech points to a player. That player dies.","reminders":["Dead","Poisoned"],"setup":false,"ability":"Each night*, choose a player: they die. You start by choosing an alive player: they are poisoned - you die if & only if they die."},{"id":"alhadikhia","name":"Al-Hadikhia","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":33,"otherNightReminder":"The Al-Hadikhia chooses 3 players. Announce the first player, wake them to nod yes to live or shake head no to die, kill or resurrect accordingly, then put to sleep and announce the next player. If all 3 are alive after this, all 3 die.","reminders":["1","2","3","Chose death","Chose life"],"setup":false,"ability":"Each night*, choose 3 players (all players learn who): each silently chooses to live or die, but if all live, all die."},{"id":"legion","name":"Legion","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":34,"otherNightReminder":"Choose a player, that player dies.","reminders":["Dead","About to die"],"setup":true,"ability":"Each night*, a player might die. Executions fail if only evil voted. You register as a Minion too. [Most players are Legion]"},{"id":"leviathan","name":"Leviathan","edition":"","team":"demon","firstNight":52,"firstNightReminder":"Place the Leviathan \'Day 1\' marker. Announce \'The Leviathan is in play; this is Day 1.\'","otherNight":72,"otherNightReminder":"Change the Leviathan Day reminder for the next day.","reminders":["Day 1","Day 2","Day 3","Day 4","Day 5","Good player executed"],"setup":false,"ability":"If more than 1 good player is executed, you win. All players know you are in play. After day 5, evil wins."},{"id":"riot","name":"Riot","edition":"","team":"demon","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":true,"ability":"Nominees die, but may nominate again immediately (on day 3, they must). After day 3, evil wins. [All Minions are Riot]"},{"id":"gangster","name":"Gangster","edition":"","team":"traveler","firstNight":0,"firstNightReminder":"","otherNight":0,"otherNightReminder":"","reminders":[],"setup":false,"ability":"Once per day, you may choose to kill an alive neighbour, if your other alive neighbour agrees."}]')},b223:function(e,t,o){e.exports=o.p+"img/mayor.da8876ae.png"},b249:function(e){e.exports=JSON.parse('[{"id":"doomsayer","firstNightReminder":"","otherNightReminder":"","reminders":[],"setup":false,"name":"Doomsayer","team":"fabled","ability":"If 4 or more players live, each living player may publicly choose (once per game) that a player of their own alignment dies."},{"id":"angel","firstNightReminder":"","otherNightReminder":"","reminders":["Protect","Something Bad"],"setup":false,"name":"Angel","team":"fabled","ability":"Something bad might happen to whoever is most responsible for the death of a new player."},{"id":"buddhist","firstNightReminder":"","otherNightReminder":"","reminders":[],"setup":false,"name":"Buddhist","team":"fabled","ability":"For the first 2 minutes of each day, veteran players may not talk."},{"id":"hellslibrarian","firstNightReminder":"","otherNightReminder":"","reminders":["Something Bad"],"setup":false,"name":"Hell\'s Librarian","team":"fabled","ability":"Something bad might happen to whoever talks when the Storyteller has asked for silence."},{"id":"revolutionary","firstNightReminder":"","otherNightReminder":"","reminders":["Used"],"setup":false,"name":"Revolutionary","team":"fabled","ability":"2 neighboring players are known to be the same alignment. Once per game, one of them registers falsely."},{"id":"fiddler","firstNightReminder":"","otherNightReminder":"","reminders":[],"setup":false,"name":"Fiddler","team":"fabled","ability":"Once per game, the Demon secretly chooses an opposing player: all players choose which of these 2 players win."},{"id":"toymaker","firstNightReminder":"","otherNight":1,"otherNightReminder":"If it is a night when a Demon attack could end the game, and the Demon is marked Final night: No Attack, then the Demon does not act tonight. (Do not wake them.)","reminders":["Final Night: No Attack"],"setup":false,"name":"Toymaker","team":"fabled","ability":"The Demon may choose not to attack & must do this at least once per game. Evil players get normal starting info."},{"id":"fibbin","firstNightReminder":"","otherNightReminder":"","reminders":["Used"],"setup":false,"name":"Fibbin","team":"fabled","ability":"Once per game, 1 good player might get false information."},{"id":"duchess","firstNightReminder":"","otherNight":1,"otherNightReminder":"Wake each player marked Visitor or False Info one at a time. Show them the Duchess token, then fingers (1, 2, 3) equaling the number of evil players marked Visitor or, if you are waking the player marked False Info, show them any number of fingers except the number of evil players marked Visitor.","reminders":["Visitor","False Info"],"setup":false,"name":"Duchess","team":"fabled","ability":"Each day, 3 players may choose to visit you. At night*, each visitor learns how many visitors are evil, but 1 gets false info."},{"id":"sentinel","firstNightReminder":"","otherNightReminder":"","reminders":[],"setup":true,"name":"Sentinel","team":"fabled","ability":"There might be 1 extra or 1 fewer Outsider in play."},{"id":"spiritofivory","firstNightReminder":"","otherNightReminder":"","reminders":["No extra evil"],"setup":false,"name":"Spirit of Ivory","team":"fabled","ability":"There can\'t be more than 1 extra evil player."},{"id":"djinn","firstNight":0,"firstNightReminder":"","otherNightReminder":"","reminders":[],"setup":false,"name":"Djinn","team":"fabled","ability":"Use the Djinn\'s special rule. All players know what it is."},{"id":"stormcatcher","firstNight":1,"firstNightReminder":"Mark a good player as \\"Safe\\". Wake each evil player and show them the marked player.","otherNightReminder":"","reminders":["Safe"],"setup":false,"name":"Storm Catcher","team":"fabled","ability":"Name a good character. If in play, they can only die by execution, but evil players learn which player it is."},{"id":"deusexfiasco","firstNightReminder":"","otherNightReminder":"","reminders":["Whoops"],"setup":false,"name":"Deus ex Fiasco","team":"fabled","ability":"Once per game, the Storyteller will make a \\"mistake\\", correct it and publicly admit to it."}]')},b30c:function(e,t,o){e.exports=o.p+"img/professor.48f01bcb.png"},b570:function(e,t,o){e.exports=o.p+"img/investigator.a817cc04.png"},b6d8:function(e,t,o){"use strict";o("e455")},b7e8:function(e,t,o){e.exports=o.p+"img/snitch.0f51b730.png"},ba9b:function(e,t,o){e.exports=o.p+"img/tealady.5fc21e59.png"},bb7a:function(e,t,o){e.exports=o.p+"img/empath.b772c7ff.png"},bd73:function(e,t,o){},bfe2:function(e,t,o){e.exports=o.p+"img/angel.cae6c8fc.png"},c0b6:function(e,t,o){},c198:function(e,t,o){"use strict";o("3998")},c24f:function(e,t,o){e.exports=o.p+"img/evil.8723a4ee.png"},c2f3:function(e,t,o){},c316:function(e,t,o){e.exports=o.p+"img/lycanthrope.48660758.png"},c492:function(e,t,o){e.exports=o.p+"img/lilmonsta.4814ed76.png"},c5bf:function(e,t,o){"use strict";o("bd73")},c5db:function(e,t,o){e.exports=o.p+"img/fisherman.0511031e.png"},c73a:function(e,t,o){e.exports=o.p+"img/po.015a8956.png"},c7b7:function(e,t,o){e.exports=o.p+"img/mezepheles.b1f4ea9e.png"},c825:function(e){e.exports=JSON.parse('[{"id":"Chambermaid","hatred":[{"id":"Mathematician","reason":"The Chambermaid learns if the Mathematician wakes tonight or not, even though the Chambermaid wakes first."}]},{"id":"Butler","hatred":[{"id":"Cannibal","reason":"If the Cannibal gains the Butler ability, the Cannibal learns this."}]},{"id":"Lunatic","hatred":[{"id":"Mathematician","reason":"The Mathematician learns if the Lunatic attacks a different player(s) than the real Demon attacked."}]},{"id":"Pit-Hag","hatred":[{"id":"Heretic","reason":"A Pit-Hag can not create a Heretic. "},{"id":"Damsel","reason":"If a Pit-Hag creates a Damsel, the Storyteller chooses which player it is."},{"id":"Politician","reason":"A Pit-hag can not create an evil Politician."}]},{"id":"Cerenovus","hatred":[{"id":"Goblin","reason":"The Cerenovus may choose to make a player mad that they are the Goblin."}]},{"id":"Leviathan","hatred":[{"id":"Soldier","reason":"If Leviathan nominates and executes the Soldier, the Soldier does not die."},{"id":"Monk","reason":"If Leviathan nominates and executes the player the Monk chose, that player does not die."},{"id":"Innkeeper","reason":"If Leviathan nominates and executes a player the Innkeeper chose, that player does not die."},{"id":"Ravenkeeper","reason":"If Leviathan is in play & the Ravenkeeper dies by execution, they wake that night to use their ability."},{"id":"Sage","reason":"If Leviathan is in play & the Sage dies by execution, they wake that night to use their ability."},{"id":"Farmer","reason":"If Leviathan is in play & a Farmer dies by execution, a good player becomes a Farmer that night."},{"id":"Mayor","reason":"If Leviathan is in play & no execution occurs on day 5, good wins."}]},{"id":"Al-Hadikhia","hatred":[{"id":"Scarlet Woman","reason":"If there are two living Al-Hadikhias, the Scarlet Woman Al-Hadikhia becomes the Scarlet Woman again."},{"id":"Mastermind","reason":"Only 1 jinxed character can be in play. Evil players start knowing which player and character it is."}]},{"id":"Lil\' Monsta","hatred":[{"id":"Poppy Grower","reason":"If the Poppy Grower is in play, Minions don\'t wake together. They are woken one by one, until one of them chooses to take the Lil\' Monsta token."},{"id":"Magician","reason":"Only 1 jinxed character can be in play. "},{"id":"Scarlet Woman","reason":"If there are 5 or more players alive and the player holding the Lil\' Monsta token dies, the Scarlet Woman is given the Lil\' Monsta token tonight."}]},{"id":"Lycanthrope","hatred":[{"id":"Gambler","reason":"If the Lycanthrope is alive and the Gambler kills themself at night, no other players can die tonight."}]},{"id":"Legion","hatred":[{"id":"Engineer","reason":"Legion and the Engineer can not both be in play at the start of the game. If the Engineer creates Legion, most players (including all evil players) become evil Legion."},{"id":"Preacher","reason":"Only 1 jinxed character can be in play."}]},{"id":"Fang Gu","hatred":[{"id":"Scarlet Woman","reason":"If the Fang Gu chooses an Outsider and dies, the Scarlet Woman does not become the Fang Gu."}]},{"id":"Spy","hatred":[{"id":"Magician","reason":"When the Spy sees the Grimoire, the Demon and Magician\'s character tokens are removed."},{"id":"Alchemist","reason":"The Alchemist can not have the Spy ability."},{"id":"Poppy Grower","reason":"If the Poppy Grower is in play, the Spy does not see the Grimoire until the Poppy Grower dies."},{"id":"Damsel","reason":"Only 1 jinxed character can be in play. "},{"id":"Heretic","reason":"Only 1 jinxed character can be in play."}]},{"id":"Widow","hatred":[{"id":"Magician","reason":"When the Widow sees the Grimoire, the Demon and Magician\'s character tokens are removed."},{"id":"Poppy Grower","reason":"If the Poppy Grower is in play, the Widow does not see the Grimoire until the Poppy Grower dies."},{"id":"Alchemist","reason":"The Alchemist can not have the Widow ability."},{"id":"Damsel","reason":"Only 1 jinxed character can be in play."},{"id":"Heretic","reason":"Only 1 jinxed character can be in play."}]},{"id":"Godfather","hatred":[{"id":"Heretic","reason":"Only 1 jinxed character can be in play."}]},{"id":"Marionette","hatred":[{"id":"Lil\' Monsta","reason":"The Marionette neighbors a Minion, not the Demon. The Marionette is not woken to choose who takes the Lil\' Monsta token."},{"id":"Poppy Grower","reason":"When the Poppy Grower dies, the Demon learns the Marionette but the Marionette learns nothing."},{"id":"Snitch","reason":"The Marionette learns 3 not in-play characters when the Snitch dies, instead of at the start of the game."},{"id":"Balloonist","reason":"If the Marionette thinks that they are the Balloonist, +1 Outsider was added."},{"id":"Damsel","reason":"The Marionette does not learn that a Damsel is in play."},{"id":"Huntsman","reason":"If the Marionette thinks that they are the Huntsman, the Damsel was added."}]},{"id":"Riot","hatred":[{"id":"Engineer","reason":"Riot and the Engineer can not both be in play at the start of the game. \\nIf the Engineer creates Riot, the evil players become Riot."},{"id":"Golem","reason":"If The Golem nominates Riot, the Riot player does not die."},{"id":"Snitch","reason":"If the Snitch is in play, each Riot player gets an extra 3 bluffs."},{"id":"Saint","reason":"If a good player nominates and kills the Saint, the Saint\'s team loses."},{"id":"Butler","reason":"The Butler can not nominate their master."},{"id":"Pit-Hag","reason":"If the Pit-Hag creates Riot, all evil players become Riot. \\nIf the Pit-Hag creates Riot after day 3, the game continues for one more day."},{"id":"Mayor","reason":"If the 3rd day begins with just three players alive, the players may choose (as a group) not to nominate at all. If so (and a Mayor is alive) then the Mayor\'s team wins."},{"id":"Monk","reason":"If a Riot player nominates and kills the Monk-protected-player, the Monk-protected-player does not die."},{"id":"Farmer","reason":"If a Riot player nominates and kills a Farmer, the Farmer uses their ability tonight."},{"id":"Innkeeper","reason":"If a Riot player nominates an Innkeeper-protected-player, the Innkeeper-protected-player does not die."},{"id":"Sage","reason":"If a Riot player nominates and kills a Sage, the Sage uses their ability tonight."},{"id":"Ravenkeeper","reason":"If a Riot player nominates and kills the Ravenkeeper, the Ravenkeeper uses their ability tonight."},{"id":"Soldier","reason":"If a Riot player nominates the Soldier, the Soldier does not die."},{"id":"Grandmother","reason":"If a Riot player nominates and kills the Grandchild, the Grandmother dies too."},{"id":"King","reason":"If a Riot player nominates and kills the King and the Choirboy is alive, the Choirboy uses their ability tonight."},{"id":"Exorcist","reason":"Only 1 jinxed character can be in play."},{"id":"Minstrel","reason":"Only 1 jinxed character can be in play."},{"id":"Flowergirl","reason":"Only 1 jinxed character can be in play."},{"id":"Undertaker","reason":"Players that die by nomination register as being executed to the Undertaker."},{"id":"Cannibal","reason":"Players that die by nomination register as being executed to the Cannibal."},{"id":"Pacifist","reason":"Players that die by nomination register as being executed to the Pacifist."},{"id":"Devil\'s Advocate","reason":"Players that die by nomination register as being executed to the Devil\'s Advocate."},{"id":"Investigator","reason":"Riot registers as a Minion to the Investigator."},{"id":"Clockmaker","reason":"Riot registers as a Minion to the Clockmaker."},{"id":"Town Crier","reason":"Riot registers as a Minion to the Town Crier."},{"id":"Damsel","reason":"Riot registers as a Minion to the Damsel."},{"id":"Preacher","reason":"Riot registers as a Minion to the Preacher."}]},{"id":"Lleech","hatred":[{"id":"Mastermind","reason":"If the Mastermind is alive and the Lleech\'s host dies by execution, the Lleech lives but loses their ability. "},{"id":"Slayer","reason":"If the Slayer slays the Lleech\'s host, the host dies. "}]}]')},c9f5:function(e,t,o){e.exports=o.p+"img/grandmother.18ee536e.png"},cadc:function(e,t,o){e.exports=o.p+"img/gossip.5165a7ee.png"},cae1:function(e,t,o){e.exports=o.p+"img/bmr-demon.75dfa056.png"},cd8b:function(e,t,o){e.exports=o.p+"img/devilsadvocate.18bb00ce.png"},ce23:function(e,t,o){var i={"./bmr-demon.png":"cae1","./bmr-minion.png":"28bf","./bmr-outsider.png":"e898","./bmr-townsfolk.png":"e988","./bmr.png":"7496","./custom.png":"441d","./luf.png":"92d8","./snv-demon.png":"f347","./snv-minion.png":"451a","./snv-outsider.png":"4dd9","./snv-townsfolk.png":"ed00","./snv.png":"2fd0","./tb-demon.png":"a3b0","./tb-minion.png":"5f4e","./tb-outsider.png":"73a1","./tb-townsfolk.png":"f7a3","./tb.png":"0aaa"};function s(e){var t=a(e);return o(t)}function a(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id="ce23"},cfcc:function(e,t,o){e.exports=o.p+"img/beggar.90311684.png"},d4b2:function(e,t,o){},d62b:function(e,t,o){e.exports=o.p+"img/slayer.4cde6d70.png"},d69f:function(e,t,o){e.exports=o.p+"img/fearmonger.4233784c.png"},d6bc:function(e,t,o){e.exports=o.p+"img/choirboy.9d62c6b3.png"},d715:function(e,t,o){e.exports=o.p+"img/savant.0fe828cf.png"},d97d:function(e,t,o){e.exports=o.p+"img/drunk.947841e5.png"},da81:function(e,t,o){e.exports=o.p+"img/legion.a5ecb237.png"},dbe8:function(e,t,o){e.exports=o.p+"img/alchemist.c860a284.png"},dce6:function(e,t,o){e.exports=o.p+"img/gambler.7e6e9736.png"},df5e:function(e,t,o){e.exports=o.p+"img/mephit.b1f4ea9e.png"},dfb1:function(e,t){e.exports=e=>{const t=e=>document.title="Blood on the Clocktower "+(e?"Town Square":"Grimoire");if(localStorage.getItem("background")&&e.commit("setBackground",localStorage.background),localStorage.getItem("muted")&&e.commit("toggleMuted",!0),localStorage.getItem("static")&&e.commit("toggleStatic",!0),localStorage.getItem("imageOptIn")&&e.commit("toggleImageOptIn",!0),localStorage.getItem("zoom")&&e.commit("setZoom",parseFloat(localStorage.getItem("zoom"))),localStorage.getItem("isGrimoire")&&(e.commit("toggleGrimoire",!1),t(!1)),void 0!==localStorage.roles&&(e.commit("setCustomRoles",JSON.parse(localStorage.roles)),e.commit("setEdition",{id:"custom"})),void 0!==localStorage.edition&&e.commit("setEdition",JSON.parse(localStorage.edition)),void 0!==localStorage.bluffs&&JSON.parse(localStorage.bluffs).forEach((t,o)=>{e.commit("players/setBluff",{index:o,role:e.state.roles.get(t)||{}})}),void 0!==localStorage.fabled&&e.commit("players/setFabled",{fabled:JSON.parse(localStorage.fabled).map(t=>e.state.fabled.get(t.id)||t)}),localStorage.players&&e.commit("players/set",JSON.parse(localStorage.players).map(t=>({...t,role:e.state.roles.get(t.role)||e.getters.rolesJSONbyId.get(t.role)||{}}))),localStorage.getItem("playerId")&&e.commit("session/setPlayerId",localStorage.getItem("playerId")),localStorage.getItem("session")&&!window.location.hash.substr(1)){const[t,o]=JSON.parse(localStorage.getItem("session"));e.commit("session/setSpectator",t),e.commit("session/setSessionId",o)}e.subscribe(({type:e,payload:o},i)=>{switch(e){case"toggleGrimoire":i.grimoire.isPublic?localStorage.removeItem("isGrimoire"):localStorage.setItem("isGrimoire",1),t(i.grimoire.isPublic);break;case"setBackground":o?localStorage.setItem("background",o):localStorage.removeItem("background");break;case"toggleMuted":i.grimoire.isMuted?localStorage.setItem("muted",1):localStorage.removeItem("muted");break;case"toggleStatic":i.grimoire.isStatic?localStorage.setItem("static",1):localStorage.removeItem("static");break;case"toggleImageOptIn":i.grimoire.isImageOptIn?localStorage.setItem("imageOptIn",1):localStorage.removeItem("imageOptIn");break;case"setZoom":0!==o?localStorage.setItem("zoom",o):localStorage.removeItem("zoom");break;case"setEdition":localStorage.setItem("edition",JSON.stringify(o)),i.edition.isOfficial&&localStorage.removeItem("roles");break;case"setCustomRoles":o.length?localStorage.setItem("roles",JSON.stringify(o)):localStorage.removeItem("roles");break;case"players/setBluff":localStorage.setItem("bluffs",JSON.stringify(i.players.bluffs.map(({id:e})=>e)));break;case"players/setFabled":localStorage.setItem("fabled",JSON.stringify(i.players.fabled.map(e=>e.isCustom?e:{id:e.id})));break;case"players/add":case"players/update":case"players/remove":case"players/clear":case"players/set":case"players/swap":case"players/move":i.players.players.length?localStorage.setItem("players",JSON.stringify(i.players.players.map(e=>({...e,role:e.role.id||{}})))):localStorage.removeItem("players");break;case"session/setSessionId":o?localStorage.setItem("session",JSON.stringify([i.session.isSpectator,o])):localStorage.removeItem("session");break;case"session/setPlayerId":o?localStorage.setItem("playerId",o):localStorage.removeItem("playerId");break}})}},e014:function(e,t,o){e.exports=o.p+"img/eviltwin.10ab31a8.png"},e222:function(e,t,o){e.exports=o.p+"img/djinn.e1c507e5.png"},e455:function(e,t,o){},e69f:function(e,t,o){e.exports=o.p+"img/marionette.8aceb38b.png"},e898:function(e,t,o){e.exports=o.p+"img/bmr-outsider.971a3d5d.png"},e988:function(e,t,o){e.exports=o.p+"img/bmr-townsfolk.9bf859b4.png"},ea17:function(e,t,o){e.exports=o.p+"img/engineer.15f1c940.png"},ec1e:function(e,t,o){e.exports=o.p+"img/spy.d411c998.png"},ed00:function(e,t,o){e.exports=o.p+"img/snv-townsfolk.83cf9a72.png"},ee02:function(e,t,o){e.exports=o.p+"img/courtier.7060de3f.png"},ee92:function(e,t,o){e.exports=o.p+"img/gunslinger.1360a66d.png"},eff4:function(e,t,o){e.exports=o.p+"img/virgin.a4b2d7a4.png"},f09b:function(e,t,o){e.exports=o.p+"img/judge.b1034c71.png"},f1e5:function(e,t,o){e.exports=o.p+"img/sweetheart.29949c36.png"},f282:function(e,t,o){e.exports=o.p+"img/poisoner.61c83e0f.png"},f299:function(e,t,o){"use strict";o("9441")},f322:function(e,t,o){e.exports=o.p+"img/scarletwoman.5377675d.png"},f344:function(e,t,o){},f347:function(e,t,o){e.exports=o.p+"img/snv-demon.2fe55248.png"},f4bd:function(e,t,o){e.exports=o.p+"img/vigormortis.981de17e.png"},f558:function(e,t,o){e.exports=o.p+"img/witch.f75f1601.png"},f6a8:function(e,t,o){e.exports=o.p+"media/countdown.1462f20c.mp3"},f7a3:function(e,t,o){e.exports=o.p+"img/tb-townsfolk.550a119b.png"},f7d3:function(e,t,o){e.exports=o.p+"img/noble.5ec7b2b5.png"},f834:function(e,t,o){e.exports=o.p+"img/mastermind.91ffd4fd.png"},f93f:function(e,t,o){e.exports=o.p+"img/clockmaker.5378c03d.png"},fcc6:function(e,t,o){e.exports=o.p+"img/barber.6c91c1f5.png"},fcdb:function(e,t,o){e.exports=o.p+"img/psychopath.cd71a0a2.png"},fd83:function(e,t,o){e.exports=o.p+"img/custom.402e9bc3.png"},ff40:function(e,t,o){"use strict";o("2294")},fff1:function(e,t,o){e.exports=o.p+"img/pacifist.0637fdf0.png"}});
//# sourceMappingURL=app.0df605f6.js.map